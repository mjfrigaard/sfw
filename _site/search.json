[
  {
    "objectID": "golem.html",
    "href": "golem.html",
    "title": "The golem framework",
    "section": "",
    "text": "The golem package provides many options for R programmers experienced with creating R packages, but who are looking to streamline their application development.1"
  },
  {
    "objectID": "golem.html#getting-started",
    "href": "golem.html#getting-started",
    "title": "The golem framework",
    "section": "Getting started",
    "text": "Getting started\nTo create a new golem app from the console, enter the following:\n\ninstall.packages(\"golem\")\nlibrary(golem)\ngolem::create_golem(path = \"gap\")\n\nIf creating a golem app from RStudio’s New Project Wizard, the following defaults are available:\n\n\n\n\n\n\n\nCreating a new golem shiny app"
  },
  {
    "objectID": "golem.html#package-files",
    "href": "golem.html#package-files",
    "title": "The golem framework",
    "section": "Package files",
    "text": "Package files\nThe initial folder structure for a new golem application is below:\n\ngap\n├── DESCRIPTION\n├── NAMESPACE\n├── R\n│   ├── app_config.R\n│   ├── app_server.R\n│   ├── app_ui.R\n│   └── run_app.R\n├── dev\n│   ├── 01_start.R\n│   ├── 02_dev.R\n│   ├── 03_deploy.R\n│   └── run_dev.R\n├── gap.Rproj\n├── inst\n│   ├── app\n│   │   └── www\n│   │       └── favicon.ico\n│   └── golem-config.yml\n├── man\n│   └── run_app.Rd\n├── renv\n│   ├── activate.R\n│   ├── settings.json\n│   └── staging\n└── renv.lock\n\n9 directories, 17 files\n\nThe dev/ folder contains golem‘s ’guided tour’ scripts. These contain functions to help guide application development.\n\ngap/dev/\n1    ├── 01_start.R\n    ├── 02_dev.R\n    ├── 03_deploy.R\n2    └── run_dev.R\n\n1 directory, 4 files\n\n\n1\n\ndev/01_start.R opens automatically\n\n2\n\ndev/run_dev.R is for running the ‘development version’ of the application."
  },
  {
    "objectID": "golem.html#getting-started-1",
    "href": "golem.html#getting-started-1",
    "title": "The golem framework",
    "section": "Getting started",
    "text": "Getting started\nIf you are familiar with R package development, you can think of the dev/ scripts as a ‘Shiny app-package development checklist.’ dev/01_start.R contains various usethis, devtools, and golem functions for for creating common package development files:\n\n\n\n\n\n\nDESCRIPTION\n\n\n\nIn the dev/01_start.R script, users build a DESCRIPTION file with golem::fill_desc()\n\n\n\n\n\n\n\n\n\n\nfill_desc() uses the desc package and the sections are entered in a key = \"value\" format\n\n\ngolem::fill_desc(\n  pkg_name = \"gap\",\n  pkg_title = \"A goelm app-package\",\n  pkg_description = \"An example golem app.\",\n  author_first_name = \"Martin\",\n  author_last_name = \"Frigaard\",\n  author_email = \"mjfrigaard@pm.me\",\n  repo_url = NULL \n)\n\n\n\n\n\n\n\n\n\nDevelopment dependencies\n\n\n\ngolem::install_dev_deps() installs the packages you’ll need to develop your golem app.\n\n\n\n\n\n\n\n\n\n\nCommon files\n\n\n\nLICENSE: usethis::use_mit_license()\nREADME: golem::use_readme_rmd(open = FALSE)\n\nFollowed by devtools::build_readme()\n\nCode of Conduct: usethis::use_code_of_conduct(contact = \"Golem User\")\nLifecycle badge: usethis::use_lifecycle_badge(\"Experimental\")\nNEWS.md: usethis::use_news_md(open = FALSE)\n\n\n\n\n\n\n\n\n\n\nThe following files are added to the root golem app-package folder:\n\n\ngap/\n  ├── CODE_OF_CONDUCT.md \n  ├── LICENSE \n  ├── LICENSE.md \n  ├── NEWS.md \n  └── README.Rmd \n\n\n\nThe next golem functions in dev/01_start.R are for setting up the testing infrastructure and recommended tests.\n\n\n\n\n\n\nTest suite files\n\n\n\ngolem::use_recommended_tests()\n\nAdds testthat to the Suggests field in DESCRIPTION\nAdds Config/testthat/edition: 3 to DESCRIPTION\n\n\n\n\n\n\n\n\n\n\n\ntests/: Installs spelling package, includes it in the Suggests field in DESCRIPTION, adds the spelling.R to tests/, and adds recommended unit tests to tests/testthat\n\n\ntests/\n├── spelling.R \n└── testthat\n    └── test-golem-recommended.R \n\n\n\n\n\n\n\n\n\ninst/: The following words will be added to the WORDLIST: Lifecycle, README, goelm, golem\n\n\ninst/\n└── WORDLIST \n\n\n\n\n\n\n\n\n\nFavicon\n\n\n\ngolem::use_favicon() to use golem’s favicon\n\ngolem::remove_favicon() to remove golems favicon.\n\n\n\n\n\n\n\n\n\n\n\nHelper functions\n\n\n\ngolem::use_utils_ui(with_test = TRUE)\ngolem::use_utils_server(with_test = TRUE)\n\n\n\n\n\n\n\n\n\n\nR/: Create R/golem_utils_ui.R and R/golem_utils_server.R utility functions in the R/ folder\n\n\nR/\n├── golem_utils_server.R\n└── golem_utils_ui.R\n\n\n\n\n\n\n\n\n\nwith_test = TRUE: creates the associated tests in the tests/testthat folder.\n\n\ntests/\n└── testthat/\n    ├── test-golem_utils_server.R\n    └── test-golem_utils_ui.R\n\n\n\n\n\n\n\n\n\nFree code!\n\n\n\n\n\n\n\nBoth R/golem_utils_ui.R and R/golem_utils_server.R contain a lot of helper functions that come in handy if you’re tired of writing out particular function names (like reactiveValuesToList() or column(width = 6)/column(width = 12))\nCheck them out here:\n\ngolem_utils_ui.R\ngolem_utils_server.R\n\n\n\n\n\n\n\n\n\n\n\nGit\n\n\n\nusethis::use_git() to initiate a Git repo.\n\nusethis::use_git_remote() to configure the remote.\n\n\n\n\n\nNow that we’ve reached the end of the dev/01_start.R script, we can open dev/02_dev.R and begin developing our application."
  },
  {
    "objectID": "golem.html#development",
    "href": "golem.html#development",
    "title": "The golem framework",
    "section": "Development",
    "text": "Development\nThe dev/02_dev.R file covers the ‘development’ phase of a new a golem app-package. Most of the golem functions in dev/02_dev.R will create files in the R/ and inst/ folders.\n\nApplication code\nBefore we create any new files, we’re going to dive into the code that’s included in a new golem app-package. Most of these files are in the R/ folder, but others live in inst/ and dev/.\n\nUI and Server\nThe two pre-configured UI and server functions are in R/app_ui.R and R/app_server.R:\nR/\n├── app_config.R\n├── app_server.R\n├── app_ui.R\n└── run_app.R\n\n1 directory, 4 files\napp_ui() and app_server() are golem-flavored UI and server files, which means they include the @noRd tag and include additional golem utilities.\n\n\n\n\n\n\nApp UI\n\n\napp_ui &lt;- function(request) {\n  tagList(\n    # Leave this function for adding external\n    # resources\n    golem_add_external_resources(),\n    # Your application UI logic\n    fluidPage(\n      # Remove the line below to start\n      # building your UI\n      golem::golem_welcome_page() \n    )\n  )\n}\n\n\n\n\n\n\n\n\n\ngolem_add_external_resources() is a wrapper for shiny::addResourcePath() and htmltools::htmlDependency()\n\n\ngolem_add_external_resources &lt;- function() {\n  add_resource_path(\n    \"www\",\n    app_sys(\"app/www\")\n  )\n\n  tags$head(\n    favicon(),\n    bundle_resources(\n      path = app_sys(\"app/www\"),\n      app_title = \"gap\"\n    )\n    # Add here other external resources\n    # for example, you can add \n    # shinyalert::useShinyalert()\n  )\n}\n\n\n\n\n\n\n\n\n\nApp Server\n\n\napp_server &lt;- function(input, output, session) {\n  # Your application server logic\n}\n\n\n\n\n\nConfiguration\nThe R/app_config.R file contains two functions: app_sys() and get_golem_config(). If you do some digging, you’ll find these utilities are wrappers for other package development functions:\n\n\n\n\n\n\nR/app_config.R: app_sys() is a wrapper for system.file().\n\n\napp_sys &lt;- function(...) {\n  system.file(..., package = \"gap\")\n}\n\n\n\n\n\n\n\n\n\nR/app_config.R: get_golem_config() is also included in R/app_config.R, which reads the inst/golem-config.yml configuration file.\n\n\nget_golem_config &lt;- function(\n  value,\n  config = Sys.getenv(\n    \"GOLEM_CONFIG_ACTIVE\",\n    Sys.getenv(\n      \"R_CONFIG_ACTIVE\",\n      \"default\"\n    )\n  ),\n  use_parent = TRUE,\n  # Modify this if your config file\n  # is somewhere else\n  file = app_sys(\"golem-config.yml\")\n) {\n  config::get(\n    value = value,\n    config = config,\n    file = file,\n    use_parent = use_parent\n  )\n}\n\n\n\n\n\n\n\n\n\ngolem_config.yml: the inst/golem-config.yml file gives access to the app version, name, and (development) working directory, so it can be used to add “production-only elements” and is “shareable across golem projects.”\n\n\ndefault:\n  golem_name: gap\n  golem_version: 0.0.0.9000\n  app_prod: no\nproduction:\n  app_prod: yes\ndev:\n  golem_wd: !expr golem::pkg_path()\n\n\n\n\n\nStandalone app function\nrun_app() is the standalone app function exported from our golem app-package.\n\n\n\n\n\n\nrun_app() is a wrapper around golem::with_golem_options() and shiny::shinyApp().\n\n\nrun_app &lt;- function(\n  onStart = NULL,\n  options = list(),\n  enableBookmarking = NULL,\n  uiPattern = \"/\",\n  ...\n) {\n  with_golem_options(\n    app = shinyApp(\n      ui = app_ui,\n      server = app_server,\n      onStart = onStart,\n      options = options,\n      enableBookmarking = enableBookmarking,\n      uiPattern = uiPattern\n    ),\n    golem_opts = list(...)\n  )\n}\n\n\n\n\n\nExternal resources\n\n\n\n\n\n\nThe inst/app/ and inst/app/wwww folders work just like the inst/extdata folder (they are loaded when the package is installed and makes these files available in the application at runtime).\n\n\ninst/\n  └── app/\n        └── www/\n\n2 directories\n\n\n\n\n\nApplication code recap\n\nThe golem framework provides a structured approach to building production-grade Shiny applications as R packages, promoting modular programming, testing, version control, and deployment readiness for enterprise or long-term projects.\n\n\n\n\n\n\nUI & Server\n\n\nThe UI and server functions in R/app_ui.R and R/app_server.R are the entry points of the golem application, serving as wrappers that connect the app’s modules and centralize the UI layout and server logic.\n\n\n\n\n\n\n\n\n\nUtility functions\n\n\ngolem’s utility functions from golem::use_utils_ui(with_test = TRUE) and golem::use_utils_server(with_test = TRUE) offer boilerplate helper functions and tests for UI and server code.\n\n\n\n\n\n\n\n\n\nTests\n\n\nThe function golem::use_recommended_tests() sets up scaffolding in tests/testthat/ to ensure your app’s UI, server logic, and utility functions work as intended. It includes examples for testing modules and behaviors, facilitating test-driven or behavior-driven development.\n\n\n\n\n\n\n\n\n\nConfigurations\n\n\nThe configuration files in golem apps (R/app_config.R and inst/golem-config.yml) manage environment-specific settings like API keys and database credentials. They separate app configurations from code, supporting different deployment environments (dev, staging, production).\n\n\n\n\n\n\nDependencies\ndev/02_dev.R starts by dealing with the package dependencies (i.e., the packages we’ll need for our golem app to run).\n\n\n\n\n\n\nPackage dependencies\n\n\nattachment::att_amend_desc() captures the dependencies in the R/ folder and includes them in the DESCRIPTION file.\n\n\n\n\n\nWriting code\nBuilding a golem application is similar to developing a regular R package, but some of the development processes have been bundled into wrapper functions. The sections below cover creating modules, utility functions, and tests:\n\nModules\nNew modules can be created with golem::add_module(). I’ve provided an example below to demonstrate the variable arguments and options:\n\ngolem::add_module(name = 'scatter_display', with_test = TRUE, export = TRUE)\n\nThe code above creates the following files:\n\nR/mod_scatter_display.R is a boilerplate Shiny module (with UI and server functions):\n\n\nshow/hide R/mod_name.R\n#' scatter_display UI Function\n#'\n#' @description A shiny Module.\n#'\n#' @param id,input,output,session Internal parameters for {shiny}.\n#'\n#' @rdname mod_scatter_display\n#' @export \n#'\n#' @importFrom shiny NS tagList \nmod_scatter_display_ui &lt;- function(id) {\n  ns &lt;- NS(id)\n  tagList(\n\n  )\n}\n\n#' scatter_display Server Functions\n#'\n#' @rdname mod_scatter_display\n#' @export \nmod_scatter_display_server &lt;- function(id){\n  moduleServer(id, function(input, output, session){\n    ns &lt;- session$ns\n\n  })\n}\n\n## To be copied in the UI\n# mod_scatter_display_ui(\"scatter_display_1\")\n\n## To be copied in the server\n# mod_scatter_display_server(\"scatter_display_1\")\n\n\ntests/testthat/test-mod_scatter_display.R: is a test file for the module with the following boilerplate tests:\n\n\nshow/hide tests/testthat/test-mod_name.R\ntestServer(\n  mod_scatter_display_server,\n  # Add here your module params\n  args = list()\n  , {\n    ns &lt;- session$ns\n    expect_true(\n      inherits(ns, \"function\")\n    )\n    expect_true(\n      grepl(id, ns(\"\"))\n    )\n    expect_true(\n      grepl(\"test\", ns(\"test\"))\n    )\n    # Here are some examples of tests you can\n    # run on your module\n    # - Testing the setting of inputs\n    # session$setInputs(x = 1)\n    # expect_true(input$x == 1)\n    # - If ever your input updates a reactiveValues\n    # - Note that this reactiveValues must be passed\n    # - to the testServer function via args = list()\n    # expect_true(r$x == 1)\n    # - Testing output\n    # expect_true(inherits(output$tbl$html, \"html\"))\n})\n\ntest_that(\"module ui works\", {\n  ui &lt;- mod_scatter_display_ui(id = \"test\")\n  golem::expect_shinytaglist(ui)\n  # Check that formals have not been removed\n  fmls &lt;- formals(mod_scatter_display_ui)\n  for (i in c(\"id\")){\n    expect_true(i %in% names(fmls))\n  }\n})\n\n\nexport = TRUE exports the module functions (@export) with the name provided to name (@rdname).\n\n\n\n\n\n\n\nThe golem::add_module() function was used to add the following modules and their accompanying test files.\n\n\nR/\n├── mod_aes_inputs.R\n├── mod_scatter_display.R\n└── mod_var_inputs.R\n\n\n\nExpand the code below to view the modules:\n\n\nshow/hide mod_aes_inputs.R\n#' aes_inputs UI Function\n#'\n#' @description A shiny Module.\n#'\n#' @param id,input,output,session Internal parameters for {shiny}.\n#'\n#' @rdname mod_aes_inputs_ui\n#'\n#' @importFrom shiny NS tagList\n#'\n#' @export\n#'\nmod_aes_inputs_ui &lt;- function(id) {\n  ns &lt;- NS(id)\n  tagList(\n    sliderInput(\n      inputId = ns(\"alpha\"),\n      label = \"Alpha:\",\n      min = 0, max = 1, step = 0.1,\n      value = 0.7\n    ),\n    sliderInput(\n      inputId = ns(\"size\"),\n      label = \"Size:\",\n      min = 0, max = 5,\n      value = 3\n    ),\n    textInput(\n      inputId = ns(\"plot_title\"),\n      label = \"Plot title\",\n      placeholder = \"Enter plot title\"\n    )\n  )\n}\n\n#' aes_inputs Server Functions\n#'\n#' @rdname mod_aes_inputs_server\n#'\n#' @export\n#'\nmod_aes_inputs_server &lt;- function(id){\n  moduleServer(id, function(input, output, session){\n    ns &lt;- session$ns\n    return(\n      reactive({\n        list(\n          \"alpha\" = input$alpha,\n          \"size\" = input$size,\n          \"plot_title\" = input$plot_title\n        )\n      })\n    )\n  })\n}\n\n## To be copied in the UI\n# mod_aes_inputs_ui(\"aes_inputs_1\")\n\n## To be copied in the server\n# mod_aes_inputs_server(\"aes_inputs_1\")\n\n\n\n\nshow/hide mod_var_inputs.R\n#' var_inputs UI Function\n#'\n#' @description A shiny Module.\n#'\n#' @param id,input,output,session Internal parameters for {shiny}.\n#'\n#' @rdname mod_var_inputs_ui\n#'\n#'\n#' @importFrom shiny NS tagList\n#'\n#' @export\n#'\nmod_var_inputs_ui &lt;- function(id) {\n  ns &lt;- NS(id)\ntagList(\n    selectInput(\n      inputId = ns(\"y\"),\n      label = \"Y-axis:\",\n      choices = c(\n        \"IMDB rating\" = \"imdb_rating\",\n        \"IMDB number of votes\" = \"imdb_num_votes\",\n        \"Critics Score\" = \"critics_score\",\n        \"Audience Score\" = \"audience_score\",\n        \"Runtime\" = \"runtime\"\n      ),\n      selected = \"audience_score\"\n    ),\n    selectInput(\n      inputId = ns(\"x\"),\n      label = \"X-axis:\",\n      choices = c(\n        \"IMDB rating\" = \"imdb_rating\",\n        \"IMDB number of votes\" = \"imdb_num_votes\",\n        \"Critics Score\" = \"critics_score\",\n        \"Audience Score\" = \"audience_score\",\n        \"Runtime\" = \"runtime\"\n      ),\n      selected = \"imdb_rating\"\n    ),\n    selectInput(\n      inputId = ns(\"z\"),\n      label = \"Color by:\",\n      choices = c(\n        \"Title Type\" = \"title_type\",\n        \"Genre\" = \"genre\",\n        \"MPAA Rating\" = \"mpaa_rating\",\n        \"Critics Rating\" = \"critics_rating\",\n        \"Audience Rating\" = \"audience_rating\"\n      ),\n      selected = \"mpaa_rating\"\n    )\n  )\n}\n\n#' var_inputs Server Functions\n#'\n#' @rdname mod_var_inputs_server\n#'\n#' @export\n#'\nmod_var_inputs_server &lt;- function(id){\n  moduleServer(id, function(input, output, session){\n    ns &lt;- session$ns\n    return(\n      reactive({\n        list(\n          \"y\" = input$y,\n          \"x\" = input$x,\n          \"z\" = input$z\n        )\n      })\n    )\n  })\n}\n\n## To be copied in the UI\n# mod_var_inputs_ui(\"var_inputs_1\")\n\n## To be copied in the server\n# mod_var_inputs_server(\"var_inputs_1\")\n\n\n\n\nshow/hide mod_scatter_display.R\n#' scatter_display UI Function\n#'\n#' @description A shiny Module.\n#'\n#' @param id,input,output,session Internal parameters for {shiny}.\n#'\n#' @rdname mod_scatter_display_ui\n#'\n#' @importFrom shiny NS tagList\n#'\n#' @export\n#'\nmod_scatter_display_ui &lt;- function(id) {\n  ns &lt;- NS(id)\n  tagList(\n    tags$br(),\n    plotOutput(outputId = ns(\"scatterplot\"))\n  )\n}\n\n#' scatter_display Server Functions\n#'\n#' @rdname mod_scatter_display_server\n#'\n#'\n#' @export\n#'\nmod_scatter_display_server &lt;- function(id, var_inputs, aes_inputs) {\n  moduleServer(id, function(input, output, session){\n    ns &lt;- session$ns\n\n    # observe({\n    # browser()\n\n    inputs &lt;- reactive({\n      plot_title &lt;- tools::toTitleCase(aes_inputs()$plot_title)\n        list(\n          x = var_inputs()$x,\n          y = var_inputs()$y,\n          z = var_inputs()$z,\n          alpha = aes_inputs()$alpha,\n          size = aes_inputs()$size,\n          plot_title = plot_title\n\n        )\n    })\n\n    output$scatterplot &lt;- renderPlot({\n      plot &lt;- scatter_plot(\n        # data --------------------\n        df = movies,\n        x_var = inputs()$x,\n        y_var = inputs()$y,\n        col_var = inputs()$z,\n        alpha_var = inputs()$alpha,\n        size_var = inputs()$size\n      )\n      plot +\n        ggplot2::labs(\n          title = inputs()$plot_title,\n            x = stringr::str_replace_all(tools::toTitleCase(inputs()$x), \"_\", \" \"),\n            y = stringr::str_replace_all(tools::toTitleCase(inputs()$y), \"_\", \" \")\n        ) +\n        ggplot2::theme_minimal() +\n        ggplot2::theme(legend.position = \"bottom\")\n    })\n\n    # })\n\n  })\n}\n\n## To be copied in the UI\n# mod_scatter_display_ui(\"scatter_display_1\")\n\n## To be copied in the server\n# mod_scatter_display_server(\"scatter_display_1\")\n\n\n\n\nUtility functions\nUtility functions can also be created directly with golem::add_utils() or golem::add_fct().2 The scatter_plot() utility function was created using the code below:\n\ngolem::add_utils(name = \"scatter_display\", with_test = TRUE)\n\n\nR/utils_scatter_display.R contains the following roxygen2 documentation:\n\n#' scatter_display\n#'\n#' @description A utils function\n#'\n#' @return The return value, if any, from executing the utility.\n#'\n#' @noRd\n#'\n\ntests/testthat/test-utils_scatter_display.R contains the following boilerplate test:\n\ntest_that(\"multiplication works\", {\n  expect_equal(2 * 2, 4)\n})\n\n\n\n\n\n\n\n\ngolem::add_utils() was used to create the following utility functions:\n\n\nR/\n├── utils_gap_theme.R\n├── utils_scatter_display.R\n└── utils_tests.R\n\n\n\nExpand the code below to view the utility functions:\n\n\nshow/hide utils_gap_theme.R\n#' thematic golem theme\n#'\n#' @returns bslib theme\n#'\n#' @export\n#'\ngap_theme &lt;- bslib::bs_theme(\n  bg = \"white\",\n  fg = \"black\",\n  accent = \"#F28E2B\",\n  bootswatch = \"united\", # optional (choose a bootstrap theme)\n  primary = \"#482878\",\n  secondary = \"#F28E2B\",\n  success = \"#59A14F\",\n  info = \"#4E79A7\",\n  warning = \"#F28E2B\",\n  danger = \"#E15759\",\n  base_font = bslib::font_google(\"Ubuntu\"),\n  heading_font = bslib::font_google(\"Raleway\")\n)\n\n\n\n\nshow/hide utils_scatter_display.R\n#' scatter plot utility function\n#'\n#' @description A utils function\n#'\n#' @return The return value, if any, from executing the utility.\n#'\n#' @rdname scatter_plot\n#'\n#' @importFrom rlang .data\n#'\n#' @export\n#'\nscatter_plot &lt;- function(df, x_var, y_var, col_var, alpha_var, size_var) {\n    ggplot2::ggplot(data = df,\n      ggplot2::aes(x = .data[[x_var]],\n          y = .data[[y_var]],\n          color = .data[[col_var]])) +\n      ggplot2::geom_point(alpha = alpha_var, size = size_var)\n}\n\n\n\n\nshow/hide utils_tests.R\n#' test_logger\n#'\n#' @description A fct function\n#'\n#' @param start A character string indicating the start tag. Default is `NULL`.\n#' @param end A character string indicating the end tag. Default is `NULL`.\n#' @param msg A character string containing the log message.\n#'\n#' @return The return value, if any, from executing the function.\n#'\n#' @rdname test_logger\n#'\n#' @export\n#'\ntest_logger &lt;- function(start = NULL, end = NULL, msg) {\n  if (is.null(start) & is.null(end)) {\n    cat(\"\\n\")\n    cli::cli_inform(\"TEST:[{format(Sys.time(), '%Y-%m-%d %H:%M:%S')}] = {msg}\")\n  } else if (!is.null(start) & is.null(end)) {\n    cat(\"\\n\")\n    cli::cli_inform(\"\\nTEST: START [{format(Sys.time(), '%Y-%m-%d %H:%M:%S')}] {start} = {msg}\")\n  } else if (is.null(start) & !is.null(end)) {\n    cat(\"\\n\")\n    cli::cli_inform(\"\\nTEST: END [{format(Sys.time(), '%Y-%m-%d %H:%M:%S')}] {end} = {msg}\")\n  } else {\n    cat(\"\\n\")\n    cli::cli_inform(\"\\nTEST: START [{format(Sys.time(), '%Y-%m-%d %H:%M:%S')}]{start} = {msg}\")\n    cat(\"\\n\")\n    cli::cli_inform(\"\\nTEST: END [{format(Sys.time(), '%Y-%m-%d %H:%M:%S')}] {end} = {msg}\")\n  }\n}\n\n\n\n\n\n\n\n\nCode file names\n\n\n\n\n\n\n Including the mod_/utils_ prefixes in the names of the .R scripts makes it easier to separate them from other code in your package namespace when using tab-completion or searching for a particular file using Ctrl + .:\n\n\n\n\n\n\n\n\nGo to File/Function in RStudio\n\n\n\n\n\n\n\n\nUI\ngolem UI contents are placed in R/app_ui.R:\n\n#' The application User-Interface\n#'\n#' @param request Internal parameter for `{shiny}`.\n#'     DO NOT REMOVE.\n#'\n#' @import shiny\n#'\n#' @noRd\n#'\napp_ui &lt;- function(request) {\n  tagList(\n    # Leave this function for adding external resources\n    golem_add_external_resources(),\n    # Your application UI logic\n      bslib::page_fillable(\n        title = \"Movie Reviews (bslib)\",\n        theme = gap_theme,\n        bslib::layout_sidebar(\n          sidebar = bslib::sidebar(\n            mod_var_inputs_ui(\"vars\"),\n            mod_aes_inputs_ui(\"aes\")\n          ),\n          bslib::card(\n            full_screen = TRUE,\n            bslib::card_header(tags$h4(tags$em(\"Brought to you by \",\n              tags$img(\n                src = \"www/golem.png\",\n                height = 100,\n                width = 100,\n                style = \"margin:10px 10px\"\n                )))\n              ),\n            bslib::card_body(\n              mod_scatter_display_ui(\"plot\")\n            )\n          )\n        )\n      )\n  )\n}\n\nWe also need to update the golem_add_external_resources() function with bslib::bs_theme_dependencies() and include our theme:\n\n#' Add external Resources to the Application\n#'\n#' This function is internally used to add external\n#' resources inside the Shiny application.\n#'\n#' @import shiny\n#' @importFrom golem add_resource_path activate_js favicon bundle_resources\n#' @noRd\ngolem_add_external_resources &lt;- function() {\n  add_resource_path(\n    \"www\",\n    app_sys(\"app/www\")\n  )\n  tags$head(\n    favicon(),\n    bundle_resources(\n      path = app_sys(\"app/www\"),\n      app_title = \"gap\"\n    ),\n    # Add here other external resources\n    # for example, you can add shinyalert::useShinyalert()\n    bslib::bs_theme_dependencies(theme = gap_theme)\n  )\n}\n\n\n\nServer\nWe’ll add the module server functions to R/app_server.R:\n\n#' The application server-side\n#'\n#' @param input,output,session Internal parameters for {shiny}.\n#'     DO NOT REMOVE.\n#' @import shiny\n#' @noRd\napp_server &lt;- function(input, output, session) {\n  # Your application server logic\n\n      selected_vars &lt;- mod_var_inputs_server(\"vars\")\n\n      selected_aes &lt;- mod_aes_inputs_server(\"aes\")\n\n      mod_scatter_display_server(\"plot\",\n                                  var_inputs = selected_vars,\n                                  aes_inputs = selected_aes)\n\n}\n\nWe’ll also include a call to thematic::thematic_shiny() in the standalone app run_app() function:\n\n#' Run the Shiny Application\n#'\n#' @param ... arguments to pass to golem_opts.\n#' See `?golem::get_golem_options` for more details.\n#' @inheritParams shiny::shinyApp\n#'\n#' @export\n#' @importFrom shiny shinyApp\n#' @importFrom golem with_golem_options\nrun_app &lt;- function(\n  onStart = NULL,\n  options = list(),\n  enableBookmarking = NULL,\n  uiPattern = \"/\",\n  ...\n) {\n  thematic::thematic_shiny()\n  with_golem_options(\n    app = shinyApp(\n      ui = app_ui,\n      server = app_server,\n      onStart = onStart,\n      options = options,\n      enableBookmarking = enableBookmarking,\n      uiPattern = uiPattern\n    ),\n    golem_opts = list(...)\n  )\n}\n\nThis ensures the application will use our bslib theme with thematic.\n\n\nWriting code recap\n\ngolem development enforces a standardized file structure and workflow, helping maintain consistent development practices. The helper functions encourage breaking the application into testable, reusable modules.\n\n\n\n\n\n\nAdding modules\n\n\nadd_module() adds a .R file with a mod_ prefix (an optional test can be included with the with_test = TRUE argument)\n\n\n\n\n\n\n\n\n\nAdding utility functions\n\n\nUtility functions can be added with add_utils() or add_fct() (also includes the with_test option for tests).\n\n\n\n\n\n\n\n\n\nAdding non-R files\n\n\n\ndev/02_dev.R includes helpers for adding JavaScript, CSS, and other files to the inst/app/www/ folder:\n\ngolem::add_js_file()\ngolem::add_js_handler()\ngolem::add_css_file()\ngolem::add_sass_file()\ngolem::add_any_file()\n\n\n\n\n\n\n\n\nData\nmovies.RData is added to inst/extdata and loaded into the package with data-raw/movies.R:\n\n## code to prepare `movies` dataset goes here\npth &lt;- system.file('extdata/movies.RData', package = 'gap')\nload(pth)\nusethis::use_data(movies, overwrite = TRUE)\n\nAfter calling usethis::use_data_raw('movies'), we use system.file() to locate the inst/extdata/movies.RData file with the code in data-raw/movies.R and save it in the data/ folder.\n\n\n\n\n\n\nExternal data\n\n\ninst/extdata/ contains the external data files.3\n\n\n\n\n\n\n\n\n\nRaw data\n\n\ndata-raw/ contains movies.R, which is used to load extdata/movies.RData and create the data/movies.rda file.\n\n\n\n\n\n\n\n\n\nPackage data\n\n\ndata/ contains the movies.rda file used in the application.\n\n\n\n\n\n\n\n\n\ninst\n└── extdata\n    └── movies.RData\n\n2 directories, 1 file\n\n\ndata-raw\n└── movies.R\n\n1 directory, 1 file\n\n\ndata\n└── movies.rda\n\n1 directory, 1 file\n\n\n\n\n\nTest files\nThe test suite was set up in the dev/01_start.R script with use_recommended_tests(), which is essentially a wrapper for usethis::use_testthat() with a few extras.4\n\nUnit tests\n\n\n\n\n\n\nThe with_test = TRUE argument in add_module() and add_utils() ensures the modules and functions also create the accompanying test files:\n\n\ntests/testthat/\n          ├── test-mod_aes_inputs.R\n          ├── test-mod_scatter_display.R\n          ├── test-mod_var_inputs.R\n          ├── test-utils_scatter_display.R\n          └── test-utils_tests.R\n\n\n\n\n\nSystem tests\nSystem tests can be performed with shinytest2 (similar to non-package or non-golem apps). I’ve stored two shinytest2 example tests in vignettes/shinytest2.Rmd (the test-shinytest2 example is below).\n\n\n\n\n\n\ntest-shinytest2.R contains the boilerplate test from running shinytest2::record_test():\n\n\nlibrary(shinytest2)\ntest_that(\"{shinytest2} recording: gap movies app\", {\n  app &lt;- AppDriver$new(\n          name = \"gap-movies-app\", \n          height = 800, \n          width = 800, \n          timeout = 15000, \n          load_timeout = 15000)\n  app$set_inputs(`vars-y` = \"imdb_num_votes\")\n  app$set_inputs(`vars-x` = \"critics_score\")\n  app$set_inputs(`vars-z` = \"genre\")\n  app$set_inputs(`vars-alpha` = 0.7)\n  app$set_inputs(`vars-size` = 3)\n  app$set_inputs(`vars-plot_title` = \"New plot title\")\n  app$expect_values()\n})\n\n\n\n\n\n\nTest coverage\nCode test coverage is handled by usethis::use_coverage() and covrpage::covrpage().5\n\n\n\n\n\n\nCode coverage\n\n\n\nuse_coverage() requires a type (“codecov” or “coveralls”).\nThe covrpage() package provides a test coverage report in tests/README.md file. This file includes a report of the R files tested, the unit test context, number of tests, and the test status.\nThe README.Rmd will include the results from devtools::check(quiet = TRUE) and a detailed report on tests coverage (see below).\n\n\n\n\nThe code coverage report provided by the README.Rmd file is below:\n\ncovr::package_coverage()\n#&gt; gap Coverage: 87.18%\n#&gt; R/run_app.R: 0.00%\n#&gt; R/utils_tests.R: 53.85%\n#&gt; R/golem_utils_server.R: 77.78%\n#&gt; R/mod_scatter_display.R: 78.38%\n#&gt; R/golem_utils_ui.R: 87.94%\n#&gt; R/app_config.R: 100.00%\n#&gt; R/app_server.R: 100.00%\n#&gt; R/app_ui.R: 100.00%\n#&gt; R/mod_aes_inputs.R: 100.00%\n#&gt; R/mod_var_inputs.R: 100.00%\n#&gt; R/utils_scatter_display.R: 100.00%"
  },
  {
    "objectID": "golem.html#deploy",
    "href": "golem.html#deploy",
    "title": "The golem framework",
    "section": "Deploy",
    "text": "Deploy\nThe final dev/03_deploy.R script contains options for pre-deployment checks, using a Dockerfile, and deploying your app to Posit services.\n\n\n\n\n\n\nRunning checks\n\n\n\ndevtools::check() and rhub::check_for_cran()6 will checks your app-package under the assumption it’s being submitted to CRAN.\ndevtools::build() will create a tar.gz file (useful for downloads/installs or a package management system).\n\n\n\n\n\n\n\n\n\n\nPosit products\n\n\n\ngolem::add_positconnect_file()\ngolem::add_shinyappsio_file()\ngolem::add_shinyserver_file()\n\nAll of these functions create an app.R file to the root of your app-package.\npkgload::load_all() is called in the new app.R file (so this package is added to the Imports field in the DESCRIPTION).\n\n\n\n\n\n\n# Launch the ShinyApp (Do not remove this comment)\n# To deploy, run: rsconnect::deployApp()\n# Or use the blue button on top of this file\n\npkgload::load_all(export_all = FALSE,\n  helpers = FALSE,\n  attach_testthat = FALSE)\noptions( \"golem.app.prod\" = TRUE)\ngap::run_app() # add parameters here (if any)\n\n\n\n\n\n\n\nR/_disable_autoload.R\n\n\nThese functions also add an empty R/_disable_autoload.R file to handle the loadSupport() warning.\n\n\n\n\n\n\n\n\n\nHidden files\n\n\nVarious hidden files are added (.rscignore) and included in the .Rbuildignore (\"^rsconnect$\" to ignore rsconnect folder, \"^app\\\\.R$\" to ignore the app.R file, etc.).\n\n\n\n\n\n\n\n\n\nDeploy code\n\n\ndev/03_deploy.R includes boilerplate code for deploying your application using rsconnect::deployApp().\n\n\n\n\nrsconnect::deployApp(\n  appName = desc::desc_get_field(\"Package\"),\n  appTitle = desc::desc_get_field(\"Package\"),\n  appFiles = c(\n    # Add any additional files unique to your app here.\n    \"R/\",\n    \"inst/\",\n    \"data/\",\n    \"NAMESPACE\",\n    \"DESCRIPTION\",\n    \"app.R\"\n  ),\n  appId = rsconnect::deployments(\".\")$appID,\n  lint = FALSE,\n  forceUpdate = TRUE\n)\n\n\nDocker\nThere are two golem functions for creating Dockerfiles:\n\ngolem::add_dockerfile_with_renv()\ngolem::add_dockerfile_with_renv_shinyproxy()\n\nBelow is an example of using add_dockerfile_with_renv():\n\n\n\n\n\n\ntmp/deploy folder\n\n\ndeploy/\n  ├── Dockerfile\n  ├── Dockerfile_base\n  ├── README\n  ├── gap_0.0.0.9000.tar.gz\n  └── renv.lock.prod\n\n\n\n\n\n\n\n\n\nDockerfile_base\n\n\nDockerfile_base is used to create a base image with necessary dependencies and configurations.\n\n\n\n\n\nshow/hide Dockerfile_base\nFROM rocker/verse:4.4.2\nRUN apt-get update -y && apt-get install -y  make zlib1g-dev git libicu-dev && rm -rf /var/lib/apt/lists/*\nRUN mkdir -p /usr/local/lib/R/etc/ /usr/lib/R/etc/\nRUN echo \"options(renv.config.pak.enabled = FALSE, repos = c(CRAN = 'https://cran.rstudio.com/'), download.file.method = 'libcurl', Ncpus = 4)\" | tee /usr/local/lib/R/etc/Rprofile.site | tee /usr/lib/R/etc/Rprofile.site\nRUN R -e 'install.packages(\"remotes\")'\nRUN R -e 'remotes::install_version(\"renv\", version = \"1.0.3\")'\nCOPY renv.lock.prod renv.lock\nRUN R -e 'renv::restore()'\n\n\n\n\n\n\n\n\nDockerfile\n\n\nDockerfile builds on this base image to set up the gap app-package and its dependencies.\n\n\n\n\n\nshow/hide Dockerfile\nFROM gap_base\nCOPY renv.lock.prod renv.lock\nRUN R -e 'options(renv.config.pak.enabled = FALSE);renv::restore()'\nCOPY gap_*.tar.gz /app.tar.gz\nRUN R -e 'remotes::install_local(\"/app.tar.gz\",upgrade=\"never\")'\nRUN rm /app.tar.gz\nEXPOSE 80\nUSER rstudio\nCMD R -e \"options('shiny.port'=80,shiny.host='0.0.0.0');library(gap);gap::run_app()\"\n\n\n\n\n\n\n\n\nREADME\n\n\nREADME contains the commands to run in the Terminal to build and run the Docker image.\n\n\n\n\n\nshow/hide README\ndocker build -f Dockerfile_base --progress=plain -t gap_base .\ndocker build -f Dockerfile --progress=plain -t gap:latest .\ndocker run -p 80:80 gap:latest\n# then go to 127.0.0.1:80\n\n\n\n\n\n\n\n\ngap_0.0.0.9000.tar.gz\n\n\ngap_0.0.0.9000.tar.gz is the app-package to deploy in the Docker container."
  },
  {
    "objectID": "golem.html#dependencies-1",
    "href": "golem.html#dependencies-1",
    "title": "The golem framework",
    "section": "Dependencies",
    "text": "Dependencies\nBelow is a quick overview of the dependencies in gap.\n\nNAMESPACE\nThe namespace file for gap is importing shiny (and the .data operator from rlang).\n# Generated by roxygen2: do not edit by hand\n\nexport(run_app)\nimport(shiny)\nimportFrom(rlang,.data)\nAs you can see, we’re only exporting the run_app() function from gap.\n\n\nImports\nThe Imports field in the DESCRIPTION file lists the following:\nImports: \n    config (&gt;= 0.3.1),\n    ggplot2,\n    golem (&gt;= 0.3.5),\n    rlang,\n    shiny (&gt;= 1.7.4),\n    stringr,\n    tools\nAs we can see, golem apps add golem as a dependency:\n\npak::local_deps_explain(\n  deps = 'golem', \n  root = \"_apps/gap\")\nℹ Loading metadata database\n✔ Loading metadata database ... done\n\ngap -&gt; golem"
  },
  {
    "objectID": "golem.html#recap",
    "href": "golem.html#recap",
    "title": "The golem framework",
    "section": "Recap",
    "text": "Recap\nIf you typically build Shiny apps in a single app.R file (or in ui.R and server.R files), the golem framework might seem overwhelming. I’ll give a quick overview of some areas I found confusing when I started using goelm:\n\ndev/ contains golem‘s ’guided tour’ scripts (01_start.R, 02_dev.R, 03_deploy.R) and run_dev.R\nR/: the primary app files for the UI and server are stored in the R/ folder (R/app_ui.R, R/app_server.R, R/run_app.R), as well as the configuration function (R/app_config.R)\ngolem apps are run using the gap::run_app() function (included in the R/ folder)\nWhile developing, golem also comes with a run_dev function that reads the R/run_dev.R file and evaluates the code.\nThe inst/ folder holds the golem-config.yml and location of any external app files.\nDeploying the application can be done with a single function: rsconnect::deployApp()\n\nGenerally speaking, golem’s start-up scripts save time and serve as a gentle introduction to some of the functions used in R package development.\nThe add_ functions are an area where golem really separates itself from standard R package development. Having dedicated Shiny development functions (and the app/inst/www folder) reduces the cognitive overhead of mapping the standard R package development functions (i.e., those from usethis and devtools) into Shiny app-package development.\ngolem is a popular framework for a reason–it’s designed to allow developers to build a shiny application and R package simultaneously. Added bonuses include taking advantage of RStudio’s build tools, great documentation, and user-guides..\nBelow is an overview of the features/functions in the golem framework:\n\n\n\n\nFeature\nArguments/Options\nDescription/Comments\n\n\n\n\ndev/ scripts\n\ndev/01_start.R\ndev/02_dev.R\ndev/03_deploy.R\n\nThese files are automatically included in new golem apps and walk through set up, development, and deployment\n\n\nfill_desc(): fills DESCRIPTION file\nArguments are passed as strings without having to worry about formatting (i.e., utils::person()).\nIncludes many necessary fields often overlooked when using usethis::create_package()\n\n\nattachment::att_amend_desc()\nUpdates the package dependencies in the Imports field of DESCRIPTION\nAlthough not part of the golem package, attachment is built by the fine folks at ThinkR and makes managing dependencies smoother.\n\n\nset_golem_options()\n\nThis sets a variety of options in the golem-config.yml file (most notably the name, version, and path to your app-package).\n\n\nuse_recommended_tests()\n\nCreate testthat infrastructure and adds a collection of boilerplate tests in the tests/testthat/ folder.\n\n\nuse_utils_ui() & use_utils_server()\nwith_test is set to TRUE\nCreates a collection of commonly used UI and server functions (and accompanying tests).\n\n\nadd_module(\"name\", fct, utils, export, with_test)\nname: ‘name’ creates mod_name_ui() and mod_name_server()\nfct: creates R/mod_name_fct.R\nutils: R/mod_name_utils.R\nexport: adds @export\nwith_test: creates tests/testthat/test-mod_name.R and includes boilerplate tests.\nThis is one of the best features in golem . A single function will create two module functions (and a module file), utility functions, and accompanying tests.\nAn added bonus is a consistent file naming convention.\n\n\nadd_fct() and add_utils()\nwith_test: creates the accompanying tests/testthat/test-[name].R file.\nThese are essentially wrappers for usethis::use_r() and usethis::use_test()\n\n\nAdding non-R code files:\n\nadd_js_file(\"script\")\nadd_js_handler(\"handlers\")\nadd_css_file(\"custom\")\nadd_sass_file(\"custom\")\n\nEach add_ function has a template:\njs_template()\njs_hanler_template()\ncss_template()\nsass_template()\nEach of these functions create the necessary files in the inst/app folder."
  },
  {
    "objectID": "golem.html#footnotes",
    "href": "golem.html#footnotes",
    "title": "The golem framework",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nThe code used to build the golem app is here.↩︎\nNew functions created with golem::add_*() functions are placed in the R/ folder with a @noRd tag by default (this behavior can be changed with the export argument).↩︎\nThis contains the movies.RData file for the original Shiny application.↩︎\nuse_recommended_tests() adds the spelling package to our DESCRIPTION and updates the WORDLIST. The tests golem creates in the tests/testthat/ folder can serve as a nice guide for users new to testthat.↩︎\nThe covrpage package is not on CRAN, but the development version always seems to work.↩︎\nrhub::check_for_cran() is “deprecated and defunct”, use rhub::rhubv2() instead.↩︎"
  },
  {
    "objectID": "rhino.html",
    "href": "rhino.html",
    "title": "the rhino framework",
    "section": "",
    "text": "rhino takes a completely novel approach to Shiny applications. Unlike golem and leprechaun, rhino apps aren’t R packages. Instead, rhino structures the application into box modules, which minimizes dependencies and separates the code into a clear ‘division of labor.’ rhino has utilities for easily adding JavaScript and SCSS, and comes with end-to-end testing.1"
  },
  {
    "objectID": "rhino.html#package-versions",
    "href": "rhino.html#package-versions",
    "title": "the rhino framework",
    "section": "Package versions",
    "text": "Package versions\n\n\n\n\n\n\n\n\n\n\n\nPackage\nVersion\nTitle\nDescription\n\n\n\n\nrhino\n1.10.1\nA Framework for Enterprise Shiny Applications\nA framework that supports creating and extending enterprise Shiny applications using best practices.\n\n\nbox\n1.2.0\nWrite Reusable, Composable and Modular R Code\nA modern module system for R. Organise code into hierarchical, composable, reusable modules, and use it effortlessly across projects via a flexible, declarative dependency loading syntax."
  },
  {
    "objectID": "rhino.html#getting-started",
    "href": "rhino.html#getting-started",
    "title": "the rhino framework",
    "section": "Getting started",
    "text": "Getting started\nTo create a new rhino application in RStudio , select Project &gt; New Project &gt; New Directory, and Shiny Application using rhino.\n\n\n\n\n\n\n\nNew rhino app\n\n\nThe New Project Wizard will require a Directory name and subdirectory and Github Actions CI (selected by default)\n\n\n\n\n\n\n\nNew Project Wizard\n\n\nAfter clicking Create Project, rhino will set up our new app (and you should see something like the following output in the Console):\n\n\n\n\n\n\nInstalling dependencies:\n\n\n- Linking packages into the project library ... Done!\n- Resolving missing dependencies ... \n# Installing packages -------------------------------\n- Installing treesitter ...     OK [linked from cache]\n- Installing treesitter.r ...   OK [linked from cache]\n\n\n\n\n\n\n\n\n\nUpdating renv lockfile:\n\n\nThe following package(s) will be updated in the lockfile:\n\n# CRAN --------------------------------------------------\n- backports      [* -&gt; 1.5.0]\n- box            [* -&gt; 1.2.0]\n- box.linters    [* -&gt; 0.10.5]\n- box.lsp        [* -&gt; 0.1.3]\n- codetools      [* -&gt; 0.2-20]\n- config         [* -&gt; 0.3.2]\n- lintr          [* -&gt; 3.2.0]\n- R.cache        [* -&gt; 0.16.0]\n- R.methodsS3    [* -&gt; 1.8.2]\n- rex            [* -&gt; 1.2.1]\n- styler         [* -&gt; 1.10.3]\n- xmlparsedata   [* -&gt; 1.0.5]\n\n# RSPM --------------------------------------------------\n- jsonlite       [* -&gt; 1.9.1]\n- logger         [* -&gt; 0.4.0]\n- R.oo           [* -&gt; 1.27.0]\n- R.utils        [* -&gt; 2.13.0]\n- renv           [* -&gt; 1.1.4]\n- rhino          [* -&gt; 1.10.1]\n- stringi        [* -&gt; 1.8.4]\n- xfun           [* -&gt; 0.51]\n\n# pm ----------------------------------------------------\n- base64enc      [* -&gt; 0.1-3]\n- brio           [* -&gt; 1.1.5]\n- bslib          [* -&gt; 0.9.0]\n- cachem         [* -&gt; 1.1.0]\n- callr          [* -&gt; 3.7.6]\n- cli            [* -&gt; 3.6.4]\n- commonmark     [* -&gt; 1.9.5]\n- crayon         [* -&gt; 1.5.3]\n- desc           [* -&gt; 1.4.3]\n- diffobj        [* -&gt; 0.3.5]\n- digest         [* -&gt; 0.6.37]\n- evaluate       [* -&gt; 1.0.3]\n- fastmap        [* -&gt; 1.2.0]\n- fontawesome    [* -&gt; 0.5.3]\n- fs             [* -&gt; 1.6.5]\n- glue           [* -&gt; 1.8.0]\n- highr          [* -&gt; 0.11]\n- htmltools      [* -&gt; 0.5.8.1]\n- httpuv         [* -&gt; 1.6.15]\n- jquerylib      [* -&gt; 0.1.4]\n- knitr          [* -&gt; 1.50]\n- later          [* -&gt; 1.4.1]\n- lazyeval       [* -&gt; 0.2.2]\n- lifecycle      [* -&gt; 1.0.4]\n- magrittr       [* -&gt; 2.0.3]\n- memoise        [* -&gt; 2.0.1]\n- mime           [* -&gt; 0.13]\n- pkgbuild       [* -&gt; 1.4.7]\n- pkgload        [* -&gt; 1.4.0]\n- praise         [* -&gt; 1.0.0]\n- processx       [* -&gt; 3.8.6]\n- promises       [* -&gt; 1.3.2]\n- ps             [* -&gt; 1.9.0]\n- purrr          [* -&gt; 1.0.4]\n- R6             [* -&gt; 2.6.1]\n- rappdirs       [* -&gt; 0.3.3]\n- Rcpp           [* -&gt; 1.0.14]\n- rlang          [* -&gt; 1.1.5]\n- rprojroot      [* -&gt; 2.0.4]\n- rstudioapi     [* -&gt; 0.17.1]\n- sass           [* -&gt; 0.4.9]\n- shiny          [* -&gt; 1.10.0]\n- sourcetools    [* -&gt; 0.1.7-1]\n- stringr        [* -&gt; 1.5.1]\n- testthat       [* -&gt; 3.2.3]\n- treesitter     [* -&gt; 0.1.0]\n- treesitter.r   [* -&gt; 1.1.0]\n- vctrs          [* -&gt; 0.6.5]\n- waldo          [* -&gt; 0.6.1]\n- withr          [* -&gt; 3.0.2]\n- xml2           [* -&gt; 1.3.8]\n- xtable         [* -&gt; 1.8-4]\n- yaml           [* -&gt; 2.3.10]\n\nThe version of R recorded in the lockfile will be updated:\n- R              [* -&gt; 4.4.2]\n\n- Lockfile written to \"~/projects/dev/rap/renv.lock\".\n- Project '~/projects/dev/rap' loaded. [renv 1.1.4]\n\n\n\n\n\n\n\n\n\nApplication structure, tests, and CI/CD:\n\n\n✔ Initialized renv.\n✔ Application structure created.\n✔ Unit tests structure created.\n✔ E2E tests structure created.\n✔ Github Actions CI added.\n\n\n\nThis initializes the new rhino app by opening the .Rproj file in RStudio . If you’re using Positron  To create a rhino application from the console, use the following:\n\ninstall.packages(\"rhino\")\nrhino::init(\"/path/to/rhino/app\")"
  },
  {
    "objectID": "rhino.html#rhino-files",
    "href": "rhino.html#rhino-files",
    "title": "the rhino framework",
    "section": "rhino files",
    "text": "rhino files\nThe initial folder structure for a new rhino app is below:\nrap/\n├── app\n│   ├── js/\n│   │   └── index.js\n│   ├── logic/\n│   │   └── __init__.R\n│   ├── main.R\n│   ├── static/\n│   │   └── favicon.ico\n│   ├── styles/\n│   │   └── main.scss\n│   └── view/\n│       └── __init__.R\n├── app.R\n├── config.yml\n├── dependencies.R\n├── rap.Rproj\n├── renv\n│   ├── activate.R\n│   ├── library/\n│   └── settings.json\n├── renv.lock\n├── rhino.yml\n└── tests/\n    ├── cypress/\n    │   └── e2e/\n    ├── cypress.config.js\n    └── testthat/\n        └── test-main.R\n\n14 directories, 16 files\nThe rhino package website has excellent documentation on their approach and philosophy to app development, and it’s worth reading through this before getting started. I’ll do my best to summarize the application’s files below:\n\nApp code\nThe app/ folder contains the primary folder and files:\n\napp\n├── js\n│   └── index.js\n├── logic\n│   └── __init__.R\n├── main.R\n├── static\n│   └── favicon.ico\n├── styles\n│   └── main.scss\n└── view\n    └── __init__.R\n\n6 directories, 6 files\n\nThe subfolders in app/ contain the following files:\n\n\n\n\n\n\napp/js/ initially contains a blank index.js script.\n\n\napp/js\n└── index.js\n\n1 directory, 1 file\n\n\n\n\n\n\n\n\n\napp/logic/ contains utility functions and code independent from Shiny.\n\n\napp/logic/\n└── __init__.R\n\n1 directory, 1 file\n\n\n\n\n\n\n\n\n\napp/static/ stores external resources (like JavaScript files) and is similar to the sub-folders in inst/ from golem and leprechaun.\n\n\napp/static/\n└── favicon.ico\n\n1 directory, 1 file\n\n\n\n\n\n\n\n\n\napp/styles/ holds custom styles (CSS and HTML) in the app/styles/main.css file (which is initially blank).\n\n\napp/styles/\n└── main.scss\n\n1 directory, 1 file\n\n\n\n\n\n\n\n\n\napp/view/ will hold all the code used to build the application and relies upon the reactive capabilities of Shiny.\n\n\napp/view/\n└── __init__.R\n\n1 directory, 1 file\n\n\n\n\n\n\n\n\n\napp/main.R contains the primary ui and server code (similar to app_ui and app_server in a golem application).\n\n\napp/\n  └── main.R\n\n1 directory, 1 file\n\n\n\nThe initial main.R file contains the following code:\n\n\nshow/hide initial app/main.R\nbox::use(\n  shiny[bootstrapPage, div, moduleServer, NS, renderUI, tags, uiOutput],\n)\n\n#' @export\nui &lt;- function(id) {\n  ns &lt;- NS(id)\n  bootstrapPage(\n    uiOutput(ns(\"message\"))\n  )\n}\n\n#' @export\nserver &lt;- function(id) {\n  moduleServer(id, function(input, output, session) {\n    output$message &lt;- renderUI({\n      div(\n        style = \"display: flex; justify-content: center; align-items: center; height: 100vh;\",\n        tags$h1(\n          tags$a(\"Check out Rhino docs!\", href = \"https://appsilon.github.io/rhino/\")\n        )\n      )\n    })\n  })\n}\n\n\n\n\n\n\n\n\nbox::use()?\n\n\n\n\n\n\nIf the box syntax looks strange–don’t worry! box is designed to ‘completely replaces the base R library and require functions.’ We’ll cover it more in the Build section below.\n\n\n\n\napp.R will run the application and contains the rhino::app() function:2\n\n# Rhino / shinyApp entrypoint. Do not edit.\nrhino::app()\n\n\n\n\n\n\n\n\nInitial rhino app\n\n\n\nYAML files\nNew rhino apps begin with two .yml configuration files:\nconfig.yml is a YAML file that follows the config package format and initially contains two calls to rhinos environment variables:3\ndefault:\n  rhino_log_level: !expr Sys.getenv(\"RHINO_LOG_LEVEL\", \"INFO\")\n  rhino_log_file: !expr Sys.getenv(\"RHINO_LOG_FILE\", NA)\nrhino.yml is a configuration file that contains options for 1) Sass build settings, and 3) import a legacy application structure to rhino.4\nsass: string               # required | one of: \"node\", \"r\"\nlegacy_entrypoint: string  # optional | one of: \"app_dir\", \"source\", \"box_top_level\"\n\n\ndependencies.R\nrhino apps manage dependencies with the dependencies.R file and renv package.\n\n\n\n\n\n\ndependencies.R is used during deployment (as we can see from the comments) and contains any add-on packages used in the application.5\n\n\n# This file allows packrat (used by rsconnect\n# during deployment) to pick up dependencies.\nlibrary(rhino)\nlibrary(treesitter)\nlibrary(treesitter.r)\n\n\n\n\n\n\n\n\n\nThe renv/ folder stores the R package versions used in the application. renv.lock contains the packages and R version used in our application.6\n\n\nrap/\n  ├── renv/\n  │    ├── activate.R\n  │    ├── library/\n  │    ├── sandbox/\n  │    └── settings.dcf\n  └── renv.lock\n\n\n\nWe know we’ll be using ggplot2, stringr, and rlang in the app, so we’ll load these packages here:\n\nrhino::pkg_install(c(\"ggplot2\", \"stringr\", \"rlang\"))\n\nAdding packages with rhino::pkg_install() will automatically update dependencies.R and renv.\n\n\nTests\nThe tests/ folder initially contains two sub-folders, cypress/ and testthat/, and the cypress.json file.\ntests\n├── cypress\n│   └── e2e\n│       └── app.cy.js\n├── cypress.config.js\n└── testthat\n    └── test-main.R\n\n4 directories, 3 files\n\n\n\n\n\n\ntests/cypress/ holds folders for using the Cypress web and component testing framework.7\n\n\ntests/cypress\n        └── e2e\n              └── app.cy.js\n\n2 directories, 1 file\n\n\n\n\n\n\n\n\n\ntests/testthat/ contains the architecture for writing unit tests with testthat, which can be run with the rhino::test_r() helper function:8\n\n\ntests/testthat/\n          └── test-main.R\n\n1 directory, 1 file"
  },
  {
    "objectID": "rhino.html#development",
    "href": "rhino.html#development",
    "title": "the rhino framework",
    "section": "Development",
    "text": "Development\nNow that we’ve covered the initial file and folder structure of a new rhino application, we’re going to cover how to convert our movie review Shiny app into the rhino structure.\nWe’ll have to 1) load the movies data, and 2) create/call the scatter_plot() utility function, and 3) convert the contents of app.R into modules.\n\n\n\n\n\n\nApplication files\n\n\n\n\n\nI’ve included the original application files below:\n\n\nshow/hide monolithlic app.R file\nui &lt;- shiny::fluidPage(\n  theme = shinythemes::shinytheme(\"spacelab\"),\n  shiny::sidebarLayout(\n    shiny::sidebarPanel(\n      shiny::selectInput(\n        inputId = \"y\",\n        label = \"Y-axis:\",\n        choices = c(\n          \"IMDB rating\" = \"imdb_rating\",\n          \"IMDB number of votes\" = \"imdb_num_votes\",\n          \"Critics Score\" = \"critics_score\",\n          \"Audience Score\" = \"audience_score\",\n          \"Runtime\" = \"runtime\"\n        ),\n        selected = \"audience_score\"\n      ),\n\n      shiny::selectInput(\n        inputId = \"x\",\n        label = \"X-axis:\",\n        choices = c(\n          \"IMDB rating\" = \"imdb_rating\",\n          \"IMDB number of votes\" = \"imdb_num_votes\",\n          \"Critics Score\" = \"critics_score\",\n          \"Audience Score\" = \"audience_score\",\n          \"Runtime\" = \"runtime\"\n        ),\n        selected = \"critics_score\"\n      ),\n\n      shiny::selectInput(\n        inputId = \"z\",\n        label = \"Color by:\",\n        choices = c(\n          \"Title Type\" = \"title_type\",\n          \"Genre\" = \"genre\",\n          \"MPAA Rating\" = \"mpaa_rating\",\n          \"Critics Rating\" = \"critics_rating\",\n          \"Audience Rating\" = \"audience_rating\"\n        ),\n        selected = \"mpaa_rating\"\n      ),\n\n      shiny::sliderInput(\n        inputId = \"alpha\",\n        label = \"Alpha:\",\n        min = 0, max = 1,\n        value = 0.4\n      ),\n\n      shiny::sliderInput(\n        inputId = \"size\",\n        label = \"Size:\",\n        min = 0, max = 5,\n        value = 3\n      ),\n\n      shiny::textInput(\n        inputId = \"plot_title\",\n        label = \"Plot title\",\n        placeholder = \"Enter text to be used as plot title\"\n      ),\n\n      shiny::actionButton(\n        inputId = \"update_plot_title\",\n        label = \"Update plot title\"\n      )\n    ),\n\n    shiny::mainPanel(\n      shiny::br(),\n      shiny::p(\n        \"These data were obtained from\",\n        shiny::a(\"IMBD\", href = \"http://www.imbd.com/\"), \"and\",\n        shiny::a(\"Rotten Tomatoes\", href = \"https://www.rottentomatoes.com/\"), \".\"\n      ),\n      shiny::p(\"The data represent\", \n        nrow(movies), \n        \"randomly sampled movies released between 1972 to 2014 in the United States.\"),\n      shiny::plotOutput(outputId = \"scatterplot\"),\n      shiny::hr(),\n        shiny::p(shiny::em(\"The code for this shiny application comes from\", \n          shiny::a(\"Building Web Applications with shiny\", \n            href = \"https://rstudio-education.github.io/shiny-course/\"))\n          )\n    )\n  )\n)\n\nserver &lt;- function(input, output, session) {\n  \n  new_plot_title &lt;- shiny::reactive({\n      tools::toTitleCase(input$plot_title)\n    }) |&gt; \n    shiny::bindEvent(input$update_plot_title, \n                     ignoreNULL = FALSE, \n                     ignoreInit = FALSE)\n    \n\n  output$scatterplot &lt;- shiny::renderPlot({\n    scatter_plot(\n        df = movies,\n        x_var = input$x,\n        y_var = input$y,\n        col_var = input$z,\n        alpha_var = input$alpha,\n        size_var = input$size\n      ) + \n      ggplot2::labs(title = new_plot_title()) + \n      ggplot2::theme_minimal() +\n      ggplot2::theme(legend.position = \"bottom\")\n  })\n}\n\nshiny::shinyApp(ui = ui, server = server)\n\n\n\n\nshow/hide scatter_plot.R utility function\nscatter_plot &lt;- function(df, x_var, y_var, col_var, alpha_var, size_var) {\n    ggplot2::ggplot(data = df,\n      ggplot2::aes(x = .data[[x_var]],\n          y = .data[[y_var]],\n          color = .data[[col_var]])) +\n      ggplot2::geom_point(alpha = alpha_var, size = size_var)\n\n}\n\n\nDownload the movies dataset.\n\n\n\n\n\n\n\n\n\nbox modules\n\n\n\n\n\n\n\n\n\n\nUnlike R packages, rhino applications don’t use the NAMESPACE and DESCRIPTION to manage dependencies. Instead, they use the box modules to explicitly import packages and functions. box is designed for writing “reusable, composable and modular R code”\n\nDependency refresher\nIn standard Shiny app development, add-on package functions are used with the following steps:\n\ninstall the package using install.packages('pkg')\nrun library(pkg), which loads the package namespace ‘and attach[es] it on the search list’\n\nIf/when the app is converted into an R package, add-on packages are managed by:\n\nincluding the package in the DESCRIPTION file\nusing pkg::fun() in code below R/ 9\n\nThe methods above might prompt the following questions:\n\nWhy do we load and attach the entire package namespace and if we only need a single function during standard (i.e., non-package) R development? 10\nWhy do we install the entire package in the DESCRIPTION if we’re only accessing a single function below R with pkg::fun() in our R package? 11\n\nThis is where box comes in–it’s designed to ‘completely replace the base R library and require functions’.\n\n\nHow box modules work\nBelow is a quick demonstration of box modules using tidyverse::tidyverse_logo(). If we attempted to use the tidyverse_logo() function without installing or loading the tidyverse meta-package, we see the following error:12\n\ntidyverse_logo()\n\nError in tidyverse_logo(): could not find function \"tidyverse_logo\"\nThis is expected, because even if tidyverse has been installed, it hasn’t been loaded with libaray(tidyverse). box modules allow us to encapsulate and explicitly import packages and functions.13\nBelow is a quick demonstration of how they work:\n\n\n\n\n\n\nCreate folder: Create a new box module named tidy (which again, is just a folder named tidy)\n\n\n└──tidy/\n    └─logo.R \n\n\n\n\n\n\n\n\n\nImport: import the tidyverse_logo() from tidyverse by creating a logo.R file with the following code\n\n\n#' @export\nbox::use(\n  tidyverse[tidyverse_logo]\n)\n\n\n\n\n\n\n\n\n\nUse module: call box::use(tidy/logo) to access the logo object from the tidy module\n\n\nbox::use(\n  tidy/logo\n)\n\n\n\nbox::use() creates and accesses box modules. The first call to box::use() in tidy/logo.R places tidyverse_logo() in a tidy module, and the second call to box::use() allows us to use the logo object.\nUse ls() on logo to return the object(s) it imports:\n\nls(logo)\n\n[1] \"tidyverse_logo\"\nTo access the objects within a box module, use the $ operator.\n\nlogo$tidyverse_logo()\n\n⬢ __  _    __   .    ⬡           ⬢  . \n / /_(_)__/ /_ ___  _____ _______ ___ \n/ __/ / _  / // / |/ / -_) __(_-&lt;/ -_)\n\\__/_/\\_,_/\\_, /|___/\\__/_/ /___/\\__/ \n     ⬢  . /___/      ⬡      .       ⬢ \n\nbox modules are self-contained, meaning the tidyverse_logo() function only exists inside the logo module. Explicitly listing the packages and functions we intend to use with box::use() means we no longer need to include calls to install.packages() and library() or require().\nNote what happens when I try to access the tidyverse_logo() function by itself:\n\ntidyverse_logo()\n\nError in tidyverse_logo(): could not find function \"tidyverse_logo\"\n\nThis was a very brief overview of box, and I highly recommend consulting the box website and vignettes. The rhino website also has a great overview on using box with Shiny apps.14\n\n\nUtility functions\nWe’ll start developing rap by creating a box module for our plotting utility function, scatter_plot(). Recall that the app/logic folder contains the non-Shiny code and functions:15\n\n\n\n\n\n\napp/logic/plot.R\n\n\napp/logic/\n├── __init__.R\n└── plot.R\n\n1 directory, 2 files\n\n\n\nIn app/logic/plot.R, we’ll include the ggplot2 and rlang functions used in scatter_plot() with box::use() :\n\n# contents of app/logic/plot.R\n\n#' scatter plot function\n#' @export\nscatter_plot &lt;- function(df, x_var, y_var, col_var, alpha_var, size_var) {\n\nbox::use(\n1  ggplot2[ggplot, aes, geom_point],\n2  rlang[.data]\n)\n  \n3  ggplot(\n    data = df,\n    aes( \n4      x = .data[[x_var]],\n      y = .data[[y_var]],\n      color = .data[[col_var]]\n    )\n  ) +\n    geom_point(alpha = alpha_var, size = size_var)\n  \n}\n\n\n1\n\nAdd ggplot2 functions\n\n2\n\nAdd rlang functions\n\n3\n\nUse ggplot2 functions\n\n4\n\nUse rlang functions\n\n\n\n\n\n\nData\nWe’ll also include a box module for importing the movies data in app/logic/data.R. This module will read the movies data from a .csv file stored in a previous branch of the sap package.16\n\n# contents of app/logic/data.R\n\n#' @export\nbox::use(\n1  vroom[vroom, cols, col_skip]\n)\n\n#' import movies data \n#' @export\nmovies_data &lt;- function() {\n  raw_csv_url &lt;- \"https://tinyurl.com/5cdmpuzy\"\n2  vroom(raw_csv_url,\n    col_types = cols(...1 = col_skip()))\n}\n\n\n1\n\nAdd vroom functions\n\n2\n\nCall vroom functions\n\n\n\n\nIn app/logic/data.R, the necessary vroom functions are included with box::use() to import movies.csv from GitHub.\nNow that we have modules for our utility function and data, we want to make them available to our Shiny (box) modules. We can do this in the app/logic/__init__.R file:\n\n# Logic: application code independent from Shiny.\n# https://go.appsilon.com/rhino-project-structure\n#' @export\nbox::use(\n  app / logic / data,\n  app / logic / plot\n)\n\nIncluding the folder paths in box::use() in app/logic/__init__.R will export the plot and data modules we created above:17\nNow we can use use app/logic/data and app/logic/plot in our Shiny (box) modules below.\n\n\nModules\nTo convert contents of our monolithic app.R file into Shiny (box) modules, we’ll start by creating files for each module in the app/view/ folder.\nFirst we’ll create the app/view/var_inputs module for collecting the user variable inputs:\n\n\n\n\n\n\napp/view/var_inputs.R\n\n\napp/view/\n├── __init__.R\n└── var_inputs.R\n\n1 directory, 2 files\n\n\n\nrhino modules are still broken into ui and server functions, and box::use() is called within each function to add the necessary package[function]\n\n\nshow/hide app/view/var_inputs.R\n## app/view/var_inputs.R\n\n# define module functions\n\n#' variable input values ui\n#' @export\nui &lt;- function(id) {\n  box::use(\n    shiny[\n      NS, tagList, selectInput\n    ],\n  )\n  ns &lt;- NS(id)\n  tagList(\n    selectInput(\n      inputId = ns(\"y\"),\n      label = \"Y-axis:\",\n      choices = c(\n        \"IMDB rating\" = \"imdb_rating\",\n        \"IMDB number of votes\" = \"imdb_num_votes\",\n        \"Critics Score\" = \"critics_score\",\n        \"Audience Score\" = \"audience_score\",\n        \"Runtime\" = \"runtime\"\n      ),\n      selected = \"audience_score\"\n    ),\n    selectInput(\n      inputId = ns(\"x\"),\n      label = \"X-axis:\",\n      choices = c(\n        \"IMDB rating\" = \"imdb_rating\",\n        \"IMDB number of votes\" = \"imdb_num_votes\",\n        \"Critics Score\" = \"critics_score\",\n        \"Audience Score\" = \"audience_score\",\n        \"Runtime\" = \"runtime\"\n      ),\n      selected = \"imdb_rating\"\n    ),\n    selectInput(\n      inputId = ns(\"z\"),\n      label = \"Color by:\",\n      choices = c(\n        \"Title Type\" = \"title_type\",\n        \"Genre\" = \"genre\",\n        \"MPAA Rating\" = \"mpaa_rating\",\n        \"Critics Rating\" = \"critics_rating\",\n        \"Audience Rating\" = \"audience_rating\"\n      ),\n      selected = \"mpaa_rating\"\n    )\n  )\n}\n\n#' variable input values server\n#' @export\nserver &lt;- function(id) {\n  box::use(\n    shiny[moduleServer, reactive],\n  )\n\n  moduleServer(id, function(input, output, session) {\n    return(\n      reactive({\n        list(\n          \"x\" = input$x,\n          \"y\" = input$y,\n          \"z\" = input$z\n        )\n      })\n    )\n  })\n}\n\n\nThe server function in app/view/var_inputs returns a reactive list of column names from the UI.\nWe’ll also create aes_inputs module for collecting the graph ‘aesthetics’ inputs:\n\n\n\n\n\n\napp/view/aes_inputs.R\n\n\napp/view/\n├── __init__.R\n├── aes_inputs.R\n└── var_inputs.R\n\n1 directory, 3 files\n\n\n\nNote that each module explicitly lists the functions it uses in the box::use() section:\n\n\nshow/hide app/view/aes_inputs.R\n# app/view/aes_inputs.R\n\n# define module functions\n\n#' aesthetic input values ui\n#' @export\nui &lt;- function(id) {\n  box::use(\n    shiny[\n      NS, tagList, \n      sliderInput, textInput\n    ],\n  )\n  ns &lt;- NS(id)\n  tagList(\n    sliderInput(\n      inputId = ns(\"alpha\"),\n      label = \"Alpha:\",\n      min = 0, max = 1, step = 0.1,\n      value = 0.5\n    ),\n    sliderInput(\n      inputId = ns(\"size\"),\n      label = \"Size:\",\n      min = 0, max = 5,\n      value = 2\n    ),\n    textInput(\n      inputId = ns(\"plot_title\"),\n      label = \"Plot title\",\n      placeholder = \"Enter plot title\"\n    )\n  )\n}\n\n#' aesthetic input values server\n#' @export\nserver &lt;- function(id) {\n  box::use(\n    shiny[moduleServer, reactive],\n  )\n\n  moduleServer(id, function(input, output, session) {\n    return(\n      reactive({\n        list(\n          \"alpha\" = input$alpha,\n          \"size\" = input$size,\n          \"plot_title\" = input$plot_title\n        )\n      })\n    )\n  })\n}\n\n\nThe final display module contains the code for collecting the variable and aesthetic inputs and rendering the graph.\n\n\n\n\n\n\napp/view/display\n\n\n├── __init__.R\n├── aes_inputs.R\n├── display\n└── var_inputs.R\n\n1 directory, 4 files\n\n\n\nThe app/logic/data and app/logic/plot modules are added to app/view/display with box::use():\n\n# app/view/display.R\n\n# import data and plot modules\nbox::use(\n  app / logic / data,\n  app / logic / plot\n)\n\nThe ui in app/view/display includes the necessary shiny functions with box::use():\n\n#' display ui\n#' @export\nui &lt;- function(id) {\n  box::use(\n    shiny[NS, tagList, tags, plotOutput]\n  )\n  ns &lt;- NS(id)\n  # use data$movies_data() ----\n  tagList(\n    tags$br(),\n    tags$p(\n      \"These data were obtained from\",\n      tags$a(\"IMBD\", href = \"http://www.imbd.com/\"), \"and\",\n      tags$a(\"Rotten Tomatoes\", href = \"https://www.rottentomatoes.com/\"), \n      \". The data represent 651 randomly sampled movies released between \n      1972 to 2014 in the United States.\"\n    ),\n    tags$hr(),\n    plotOutput(outputId = ns(\"scatterplot\")),\n    tags$hr(),\n    tags$blockquote(\n      tags$em(\n        tags$h6(\n          \"The code for this application comes from the \",\n          tags$a(\"Building web applications with Shiny\",\n            href = \"https://rstudio-education.github.io/shiny-course/\"\n          ),\n          \"tutorial\"\n        )\n      )\n    )\n  )\n}\n\nThe server function adds the ggplot2, shiny, tools, and stringr functions with box::use() for creating the plot output, and imports the movies data with data$movies_data():\n\n#' display server\n#' @export\nserver &lt;- function(id, var_inputs) {\n  \n  # load \n  box::use(\n    ggplot2[labs, theme_minimal, theme],\n    shiny[NS, moduleServer, plotOutput, reactive, renderPlot],\n    tools[toTitleCase],\n    stringr[str_replace_all]\n  )\n\n  moduleServer(id, function(input, output, session) {\n    \n    # use data$movies_data() ----\n    movies &lt;- data$movies_data()\n\n    inputs &lt;- reactive({\n      plot_title &lt;- toTitleCase(var_inputs()$plot_title)\n      list(\n        x = var_inputs()$x,\n        y = var_inputs()$y,\n        z = var_inputs()$z,\n        alpha = var_inputs()$alpha,\n        size = var_inputs()$size,\n        plot_title = plot_title\n      )\n    })\n\n    output$scatterplot &lt;- renderPlot({\n      # use plot$scatter_plot() ----\n      plot &lt;- plot$scatter_plot(\n        df = movies,\n        x_var = inputs()$x,\n        y_var = inputs()$y,\n        col_var = inputs()$z,\n        alpha_var = inputs()$alpha,\n        size_var = inputs()$size\n      )\n      plot +\n        labs(\n          title = inputs()$plot_title,\n          x = str_replace_all(\n            toTitleCase(inputs()$x ), \"_\", \" \" ),\n          y = str_replace_all(\n            toTitleCase(inputs()$y), \"_\", \" \" )\n        ) +\n        theme_minimal() +\n        theme(legend.position = \"bottom\")\n    })\n  })\n}\n\nAfter creating the app/view/display.R module, I’ll add testthat tests for the app/logic/ and app/view modules.\n\n\nUnit tests\nThe unit tests for the box modules in app/logic/ and app/view/ are in the tests/testthat/ folder:\n\n\n\n\n\n\ntests/testthat/\n\n\ntests/testthat/\n        ├── test-data.R\n        └── test-plot.R\n\n1 directory, 2 files\n\n\n\nUnit tests with rhino applications are similar to unit tests in R packages, with a few important differences:\n\nWe don’t have access to the usethis and devtools functions for creating or running test files, so we’ll need to import the necessary testthat functions with box::use()\nTo run the tests in rap, we can use the rhino::test_r() function (test_r() will run the unit tests in tests/testthat/)\n\nThe first test for app/logic/data.R is below:\n\n# import testthat \nbox::use(\n  testthat[describe, it, expect_equal, expect_true]\n)\n\n# import data module\nbox::use(\n  app / logic / data\n)\n\ndescribe(\"Feature: Movies Data Dimensions Verification\n  As a data analyst,\n  I want to ensure the movies data frame has the correct dimensions\n  So that I can rely on its structure for further analysis.\", \n  code = {\n  it(\"Scenario: Checking the dimensions of the movies data frame\n    Given a function to import movies data\n    When I call the function to retrieve the movies data\n    Then the data frame should have 651 rows and 34 columns\n    And the data frame should be of type 'data.frame'\", \n    code = {\n    # call function to import movies data\n    movies &lt;- data$movies_data()\n    # test dimensions\n    expect_equal(\n      object = dim(movies), \n      expected = c(651L, 34L))\n    # test class\n    expect_true(object = is.data.frame(movies))\n  })\n})\n\nThe test for app/logic/plot.R is below. Note this test imports the app/logic/data and app/logic/plot modules:\n\n# import testthat and ggplot2 function\nbox::use(\n  testthat[describe, it, expect_equal, expect_true],\n  ggplot2[is.ggplot]\n)\n# import data and plot modules\nbox::use(\n  app / logic / data,\n  app / logic / plot\n)\n\n\ndescribe(\"Feature: Scatter Plot Generation Verification\n  As a data analyst,\n  I want to ensure that scatter_plot() generates a valid scatter plot\n  So that I can use it for visualizing relationships in movies data.\", \n  code = {\n  it(\"Scenario: Generating a scatter plot with specified parameters\n    Given a function to import movies data\n    And a function scatter_plot() from the plot module\n    When I call scatter_plot() with movies data\n    And specify x_var as 'critics_score'\n    And specify y_var as 'imdb_rating'\n    And specify col_var as 'mpaa_rating'\n    And set alpha_var to 2 / 3\n    And set size_var to 2\n    Then the function should return a ggplot object with a scatter plot\",\n    code = {\n    # call function to import movies data\n    movies &lt;- data$movies_data()\n    # test point plot\n    expect_true(\n      is.ggplot(\n          # call scatter_plot() from plot module\n          plot$scatter_plot(\n            df = movies,\n            x_var = 'critics_score', \n            y_var = 'imdb_rating', \n            col_var = 'mpaa_rating', \n            alpha_var = 2 / 3,\n            size_var = 2\n          )\n        )\n      )\n  })\n})\n\nRunning the testthat tests in rap app is slightly different than executing tests in an R package. The standard devtools functions and keyboard shortcuts aren’t available, but rhino comes with a rhino::test_r() helper function to run all the tests in the testthat/ folder:\n\n\n\n\n\n\nrhino::test_r()\n\n\n══ Results ════════════════════════════\n[ FAIL 0 | WARN 0 | SKIP 0 | PASS 4 ]\n&gt; rhino::test_r()\n✔ | F W  S  OK | Context\n✔ |          2 | data                 \n✔ |          1 | main                 \n✔ |          1 | plot                 \n\n══ Results ════════════════════════════\n[ FAIL 0 | WARN 0 | SKIP 0 | PASS 4 ]\n\n\n\n\n\nModule tests\nWe can test the application modules with Shiny’s testServer() function. We’ll test that the reactive list of inputs is returned from app/view/var_inputs and app/view/aes_inputs:\n\n\nshow/hide tests/testthat/test-var_inputs.R\n# import testthat and shiny's testServer()\nbox::use(\n  testthat[describe, it, expect_equal],\n  shiny[testServer]\n)\n\n# import inputs module\nbox::use(\n  app / view / var_inputs\n)\n\ndescribe(\"Feature: Server Reactive Values Verification\n  As a Shiny app developer,\n  I want to ensure the var_inputs module returns a list of reactive values \n  So that I can confirm the server's responsiveness to input changes.\", \n  code = {\n  it(\"Scenario: Checking the return values of the server function\n    Given a server function var_inputs$server for handling reactive inputs\n    When I create a server object and set reactive input values as:\n      | input       | value            |\n      | x           | audience_score   |\n      | y           | imdb_rating      |\n      | z           | mpaa_rating      |\n    And I compare the returned values from the server\n    Then the returned values should match the following list:\n      | key        | value            |\n      | x          | audience_score   |\n      | y          | imdb_rating      |\n      | z          | mpaa_rating      |\", \n    code = {\n    # create server object\n    testServer(app = var_inputs$server, expr = {\n      # create list of output vals\n      test_vals &lt;- list(\n        x = \"audience_score\",\n        y = \"imdb_rating\",\n        z = \"mpaa_rating\")\n      # change inputs\n      session$setInputs(x = \"audience_score\",\n                        y = \"imdb_rating\",\n                        z = \"mpaa_rating\")\n      # test class\n      expect_equal(\n        object = session$returned(),\n        expected = test_vals\n      )\n   })\n  })\n})\n\n\n\n\nshow/hide tests/testthat/test-aes_inputs.R\n# import testthat and shiny's testServer()\nbox::use(\n  testthat[describe, it, expect_equal],\n  shiny[testServer]\n)\n\n# import inputs module\nbox::use(\n  app / view / aes_inputs\n)\n\ndescribe(\"Feature: Server Reactive Values Verification\n  As a Shiny app developer,\n  I want to ensure the aes_inputs module returns a list of reactive values \n  So that I can confirm the server's responsiveness to input changes.\", \n  code = {\n  it(\"Scenario: Checking the return values of the server function\n    Given a server function aes_inputs$server for handling reactive inputs\n    When I create a server object and set reactive input values as:\n      | alpha      | 0.5              |\n      | size       | 2                |\n      | plot_title | Enter Plot Title |\n    And I compare the returned values from the server\n    Then the returned values should match the following list:\n      | alpha      | 0.5              |\n      | size       | 2                |\n      | plot_title | Enter Plot Title |\", \n    code = {\n    # create server object\n    testServer(app = aes_inputs$server, expr = {\n      # create list of output vals\n      test_vals &lt;- list(\n        alpha = 0.5,\n        size = 2,\n        plot_title = \"Enter Plot Title\")\n      # change inputs\n      session$setInputs(alpha = 0.5,\n                        size = 2,\n                        plot_title = \"Enter Plot Title\")\n      # test class\n      expect_equal(\n        object = session$returned(),\n        expected = test_vals\n      )\n   })\n  })\n})\n\n\nWe’ll also want to make sure the reactive inputs are passed from the app/view/inputs/ module to the app/view/display/ module.\n\n# import testthat and shiny's testServer()\nbox::use(\n  testthat[describe, it, expect_equal],\n  shiny[testServer]\n)\n\n# import inputs module\nbox::use(\n  app / view / display,\n  app / view / var_inputs,\n  app / view / aes_inputs\n)\n\ndescribe(\"Feature: Server Acceptance of Reactive Values\n  As a Shiny app developer,\n  I want to verify that the display server can accept a list of reactive values\n  So that I can ensure the interactive elements of the app respond as expected.\",\n  code = {\n  it(\"Scenario: Confirming the server's handling of reactive input values\n    Given a server function display$server for processing reactive inputs\n    When I test the server with a list of reactive inputs:\n      | input      | value            |\n      | x          | critics_score    |\n      | y          | imdb_rating      |\n      | z          | mpaa_rating      |\n      | alpha      | 0.5              |\n      | size       | 2                |\n      | plot_title | 'Plot Title'     |\n    Then the server should correctly receive and process the reactive inputs\n    And the inputs received by the server should match the specified values\",\n    code = {\n    # test inputs to display$server\n    testServer(\n      app = display$server,\n      args = list(\n        var_inputs =\n          reactive(\n            list( \n                x = \"critics_score\",\n                y = \"imdb_rating\",\n                z = \"mpaa_rating\"\n              )\n            ),\n          aes_inputs =\n            reactive(\n              list( \n                alpha = 0.5,\n                size = 2,\n                plot_title = \"plot title\"\n                )\n              )\n      ),\n      expr = {\n        expect_equal(\n          # test against input reactive list\n          object = inputs(),\n          expected = list(\n            x = \"critics_score\",\n            y = \"imdb_rating\",\n            z = \"mpaa_rating\",\n            alpha = 0.5,\n            size = 2,\n            plot_title = \"Plot Title\"\n          )\n        )\n    })\n  })\n})\n\n\n\n\n\n\n\ntests/testthat/\n\n\ntests/testthat/\n├── test-data.R\n├── test-display.R\n├── test-inputs.R\n├── test-main.R\n└── test-plot.R\n\n1 directory, 5 files\n\n\n\n\n\n\n\n\n\nrhino::test_r()\n\n\n✔ | F W  S  OK | Context\n✔ |          1 | aes_inputs\n✔ |          2 | data      \n✔ |          1 | display   \n✔ |          1 | plot      \n✔ |          1 | var_inputs\n\n══ Results ═══════════════════════════\n[ FAIL 0 | WARN 0 | SKIP 0 | PASS 6 ]\n\n\n\nThese tests confirm the reactive values are passed between the app/view/inputs and the app/view/display modules.\n\n\nLaunch\nAfter the app/logic/ and app/view/ code has been written and tested, we can add the modules and layout functions to app/main.R:\n\n# app/main.R\n\n# shiny functions\nbox::use(\n  shiny[\n    NS, tags, icon, moduleServer\n  ],\n  # bslib functions\n  bslib[\n    page_fillable, layout_sidebar, sidebar, \n    card, card_header, card_body, bs_theme\n  ]\n)\n\n# import modules ----\nbox::use(\n  ## load inputs module\n  app / view / var_inputs,\n  app / view / aes_inputs,\n  ## load display module \n  app / view / display\n)\n\nThe ui() and server() functions in app/main look very similar to golem and leprechaun UI and server functions, except we access the modules using the $ operator.\nThe ui() function includes var_inputs$ui(), aes_inputs$ui() and display$ui().\n\n#' rap ui\n#' @export\nui &lt;- function(id) {\n  ns &lt;- NS(id)\n  page_fillable(\n    # theme\n    theme = bs_theme(\n        bg = \"#202123\", \n        fg = \"#B8BCC2\",\n        primary = \"#EA80FC\", \n        secondary = \"#48DAC6\",\n        base_font = c(\"Proxima Nova\", \"sans-serif\"),\n        code_font = c(\"Hack\", \"monospace\"),\n        heading_font = c(\"Optima\", \"sans-serif\")\n    ),\n    layout_sidebar(\n      sidebar = sidebar(\n        var_inputs$ui(ns(\"vals\")),\n        aes_inputs$ui(ns(\"aes\"))\n        ),\n        card(\n          full_screen = TRUE,\n        card_body(\n            display$ui(ns(\"disp\"))\n          )\n        )\n      )\n    )\n}\n\nThe help-button will be covered below in the rhino::build_sass() and rhino::build_js().\nThe server function in app/main.R calls the var_inputs$server() and aes_inputs$server(), collects the input values as selected_vars and selected_aes, then passes these to display$server():\n\n#' rap server\n#' @export\nserver &lt;- function(id) {\n  moduleServer(id, function(input, output, session) {\n    \n    # collect variable inputs module server ----\n    selected_vars &lt;- var_inputs$server(id = \"vals\")\n    # collect aesthetic inputs module server ----\n    selected_aes &lt;- aes_inputs$server(id = \"aes\")\n    \n    # pass to display module server ----\n    display$server(\n      id = \"disp\",\n      var_inputs = selected_vars,\n      aes_inputs = selected_aes\n    )\n  })\n}\n\nAfter saving all the module files and app/main.R, we can run the app using app.R:\n\n\n\n\n\n\n\nInitial rap app\n\n\n\n\nAdding resources\nIt’s fairly straightforward to add external resources (i.e., JavaScript, CSS, Sass, etc.) to rhino apps. We’ll cover the examples from the website to demonstrate adding both CSS and JavaScript to the rap codebase. Be sure to download and install Node.js.\n\n\n\n\n\n\nNode.js in Positron \n\n\n\n\n\n\nWhile developing in Positron, I kept getting the following error when trying to execute build_sass() and build_js():\nError in `value[[3L]]()`:\n! Do you have Node.js installed?\nCheck https://go.appsilon.com/rhino-system-dependencies for details.\nℹ If you can't use Node.js, try using sass: 'r' configuration.\nBoth functions worked in RStudio, so I was able to add both SASS and JavaScript to the app.\nThe path for my nvm/node versions are below:\nIn RStudio \nBash@MacBook rap$ which npm\n/Users/mjfrigaard/.nvm/versions/node/v22.14.0/bin/npm\nBash@MacBook rap$ which node\n/Users/mjfrigaard/.nvm/versions/node/v22.14.0/bin/node\nIn Positron \n(3.9.15) Bash@MacBook rap$ which npm\n/Users/mjfrigaard/.nvm/versions/node/v22.14.0/bin/npm\n(3.9.15) Bash@MacBook rap$ which node\n/Users/mjfrigaard/.nvm/versions/node/v22.14.0/bin/node\n\n\n\n\nUpdate the card_header() to include the title, info button, and display module in app/main.R:\n\n\n\n\n\n\nHelp button\n\n\ncard_header(\n  tags$button(id = \"help-button\",\n    icon(\"info\"),\n    # add 'onclick' after \n    # rhino::build_sass() and \n    # rhino::build_js()\n    onclick = \"App.showHelp()\")\n)\n\n\n\nThe following CSS is added to app/styles/main.css in the container for the button.\n\n\n\n\n\n\napp/styles/main.css\n\n\n// app/styles/main.scss\n\n.components-container {\n    display: inline-grid;\n    grid-template-columns: 1fr 1fr;\n    width: 100%;\n  \n    .component-box {\n      padding: 10px;\n      margin: 10px;\n      box-shadow: \n        0 4px 8px 0 #00000033,   \n        0 6px 20px 0 #00000030;\n    }\n  }\n  \n  h1 {\n    text-align: center;\n    font-weight: 900;\n  }\n  \n  #help-button {\n    position: fixed;\n    top: 0;\n    right: 0;\n    margin: 10px;\n  }\n\n\n\nRun rhino::build_sass() to create the app/static/css/app.min.css file (requires node.js)\n\n\n\n\n\n\nrhino::build_sass()\n\n\nℹ Initializing Node.js directory...\nℹ Installing Node.js packages with npm...\n\nadded 761 packages in 23s\n\n&gt; build-sass\n&gt; sass --no-source-map --style=compressed\n  ../app/styles/main.scss:\n  ../app/static/css/app.min.css\n\n\n\nThis tells me app.min.css has been added to in app/static/css/\napp/static/\n      └── css\n           └── app.min.css\nAdd the following to app/js/index.js:\nexport function showHelp() {\nalert('Learn more about shiny frameworks: https://mjfrigaard.github.io/posts/my-rhino-app/');\n}\nRun rhino::build_js() to build the app/static/js/app.min.js (requires node.js)\n\n\n\n\n\n\nrhino::build_js()\n\n\nbuild-js\nwebpack\n\nasset app.min.js 502 bytes [emitted]\n[minimized] (name: main)\nruntime modules 670 bytes 3 modules\n../app/js/index.js 126 bytes [built] [code generated]\nwebpack 5.69.0 compiled successfully in 1300 ms\n\n\n\nThe output tells me the app.min.js has been created in app/static/js\napp/static/\n      └── js\n          └── app.min.js\nNow when I save everything and click ‘Run App’ in app.R I should see the info button (and message):\n\n\n\n\n\n\n\nAdding .js to app/js/index.js\n\n\n\nUpdate main.R test\nThe message from our info-button has changed, so we’ll want to update the test to include the correct string match:\n\nbox::use(\n  shiny[testServer],\n  testthat[expect_true, test_that],\n)\nbox::use(\n  app/main[server],\n)\n\ntest_that(\"main server works\", {\n  testServer(server, {\n    expect_true(\n      grepl(x = output$message$html, \n            pattern = \"Learn more about shiny frameworks: https://mjfrigaard.github.io/posts/my-rhino-app/\"))\n  })\n})\n\n\n\n\nSystem tests (shinytest2)\nSystem tests can also be written using shinytest2. The tests below come from System tests chapter of Shiny App-Packages.18\nStart by installing shinytest2 and shinyvalidate:19\n\nrhino::pkg_install(c(\"shinytest2\", \"shinyvalidate\"))\n\nCreate new tests with shinytest2::record_test() the same way you would for a standard Shiny app:\n\nshinytest2::record_test()\n\n\n\n\n\n\n\n\nTest recorder\n\n\nThis produces the following in the Console:\nLoading required package: shiny\n\nListening on http://127.0.0.1:5800\n{shiny} R stderr ----------- Loading required package: shiny\n{shiny} R stderr ----------- Running application in test mode.\n{shiny} R stderr ----------- \n{shiny} R stderr ----------- Listening on http://127.0.0.1:6435\n• Saving test runner: tests/testthat.R\n• Saving test file: tests/testthat/test-shinytest2.R\n• Adding shinytest2::load_app_env() to tests/testthat/setup-shinytest2.R\n• Running recorded test: tests/testthat/test-shinytest2.R\nLoading required package: testthat\n✔ | F W  S  OK | Context\n✔ |   2      1 | shinytest2 [11.9s]                                                         \n────────────────────────────────────────────────────────────────────────────────\nWarning (test-shinytest2.R:11:3): {shinytest2} recording: rap\nAdding new file snapshot: 'tests/testthat/_snaps/rap-001_.png'\n\nWarning (test-shinytest2.R:11:3): {shinytest2} recording: rap\nAdding new file snapshot: 'tests/testthat/_snaps/rap-001.json'\n────────────────────────────────────────────────────────────────────────────────\n\n══ Results ═════════════════════════════════════════════════════════════════════\nDuration: 12.0 s\n\n[ FAIL 0 | WARN 2 | SKIP 0 | PASS 1 ]\n\nrhino Shiny modules\n\n\n\n\n\n\nWhen setting inputs with app$set_inputs() in sap, the variable inputIds are nested inside the module namespaces:\n\n\napp$set_inputs(`vars-y` = \"imdb_num_votes\")\napp$set_inputs(`vars-x` = \"critics_score\")\napp$set_inputs(`vars-z` = \"genre\")\n\n\n\n\n\n\n\n\n\nIn rap, the box modules have another level of encapsulation (i.e., vars-y becomes app-vals-y):\n\n\napp$set_inputs(`app-vals-y` = \"imdb_num_votes\")\napp$set_inputs(`app-vals-x` = \"critics_score\")\napp$set_inputs(`app-vals-z` = \"genre\")\n\n\n\nIt’s important to keep these differences in mind when writing shinytest2 tests.20\n\n\nBDD system tests\nI’ve provided a few shinytest2 example tests for the data visualization user-input features using testthats BDD functions:21\n\n\nshow/hide contents of tests/testthat/test-rap-feature-01.R\nlibrary(shinytest2)\ndescribe(\"Feature 1: Scatter plot data visualization dropdowns\n           As a film data analyst\n           I want to explore variables in the movie review data\n           So that I can analyze relationships between movie reivew sources\", {\n             \n  describe(\"Scenario A: Change dropdown values for plotting\n             Given the movie review application is loaded\n             When I choose the variable [critics_score] for the x-axis\n             And I choose the variable [imdb_num_votes] for the y-axis\n             And I choose the variable [genre] for the color\", {\n    it(\"Then the scatter plot should show [critics_score] on the x-axis\n         And the scatter plot should show [imdb_num_votes] on the y-axis\n         And the points on the scatter plot should be colored by [genre]\", {\n              app &lt;- AppDriver$new(name = \"feature-01-senario-a\", \n                                     height = 800, width = 1173)\n                app$set_inputs(`app-vars-y` = \"imdb_num_votes\")\n                app$set_inputs(`app=vars-x` = \"critics_score\")\n                app$set_inputs(`app-vars-z` = \"genre\")\n                app$expect_values()\n       })\n   })\n             \n  describe(\"Scenario B: Change dropdown values for plotting\n              Given the movie review application is loaded\n              When I choose the size of the points to be [0.7]\n              And I choose the opacity of the points to be [3]\n              And I enter '[New plot title]' for the plot title\", {\n         it(\"Then the size of the points on the scatter plot should be [3]\n              And the opacity of the points on the scatter plot should be [0.7]\n              And the title of the plot should be '[New Plot Title]'\", {\n              app &lt;- AppDriver$new(name = \"feature-01-senario-b\", \n                                     height = 800, width = 1173)\n                app$set_inputs(`app-vars-alpha` = 0.7)\n                app$set_inputs(`app-vars-size` = 3)\n                app$set_inputs(`app-vars-plot_title` = \"New plot title\")\n                app$expect_values()\n        })\n    })\n})\n\n\nNote that these tests combine testthat’s describe() and it() functions with the Gherkin syntax.\n\n\n\nSystem tests (Cypress)\nrhino apps extend the test suite to include the Cypress test framework. The Cypress testing framework relies on node.js. Every machine/setup is a little different, but I use homebrew, so I installed node with the following:\n# remove to get a fresh start\nbrew uninstall node\n# update homebrew \nbrew update\nbrew upgrade\n# file cleanup\nbrew cleanup\nInstall node:\nbrew install node\nLink node (I had to use the --overwrite flag):\nbrew link --overwrite node\nLinking /usr/local/Cellar/node/21.5.0... 112 symlinks created.\nRun the post-install:\nbrew postinstall node\n==&gt; Postinstalling node\nVerify versions:\nnode --version\nv22.14.0\nnpm -v\n10.9.2\n\nClick & message\nThe Cypress tests below follow the example from the rhino website. Below are two modules (clicks.R and message.R) that have been included in app/view (as app/view/message.R and app/view/clicks.R).\nBoth modules contain an actionButton() and textOutput():\n\n\nshow/hide app/view/message.R\n# app/view/message.R\n\nbox::use(\n  shiny[actionButton, div, \n    moduleServer, NS, renderText, \n    req, textOutput],\n)\n\n#' @export\nui &lt;- function(id) {\n  ns &lt;- NS(id)\n  div(\n    class = \"message\",\n    actionButton(\n      ns(\"show_message\"),\n      \"Show message\"\n    ),\n    textOutput(ns(\"message_text\"))\n  )\n}\n\n#' @export\nserver &lt;- function(id) {\n  moduleServer(id, function(input, output, session) {\n    output$message_text &lt;- renderText({\n      req(input$show_message)\n      \"This is a message\"\n    })\n  })\n}\n\n\n\n\nshow/hide app/view/clicks.R\n# app/view/clicks.R\n\nbox::use(\n  shiny[actionButton, div,\n    moduleServer, NS, \n    renderText, textOutput]\n)\n\n#' @export\nui &lt;- function(id) {\n  ns &lt;- NS(id)\n  div(\n    class = \"clicks\",\n    actionButton(\n      ns(\"click\"),\n      \"Click me!\"\n    ),\n    textOutput(ns(\"counter\"))\n  )\n}\n\n#' @export\nserver &lt;- function(id) {\n  moduleServer(id, function(input, output, session) {\n    output$counter &lt;- renderText(input$click)\n  })\n}\n\n\n\n\nUpdated app/main.R\nUsing app/view/clicks and app/view/message also requires adding the modules to the app/main.R file with box::use():\n\n\nshow/hide app/main.R\n# app/main.R\n\n# shiny functions\nbox::use(\n  shiny[\n    NS, span, tags, icon, moduleServer\n  ],\n  # bslib functions\n  bslib[\n    page_fillable, layout_sidebar, sidebar, \n    card, card_header, card_body, bs_theme\n  ]\n)\n\n# import modules ----\nbox::use(\n  ## load inputs module\n  app / view / var_inputs,\n  app / view / aes_inputs,\n  ## load display module \n  app / view / display,\n  ## load clicks module \n  app / view / clicks,\n  ## load message module \n  app / view / message\n)\n\n#' rap ui\n#' @export\nui &lt;- function(id) {\n  ns &lt;- NS(id)\n  page_fillable(\n    # theme\n    theme = bs_theme(\n        bg = \"#202123\", \n        fg = \"#B8BCC2\",\n        # accent colors (e.g., hyperlink, button, etc)\n        primary = \"#EA80FC\", \n        secondary = \"#48DAC6\",\n        # fonts\n        base_font = c(\"Proxima Nova\", \"sans-serif\"),\n        code_font = c(\"Hack\", \"monospace\"),\n        heading_font = c(\"Optima\", \"sans-serif\")\n    ),\n    layout_sidebar(\n      sidebar = sidebar(\n        # input modules \n        var_inputs$ui(ns(\"vals\")),\n        aes_inputs$ui(ns(\"aes\"))\n        ),\n        card(\n          full_screen = TRUE,\n          card_header(\n            tags$button(id = \"help-button\",\n              icon(\"info\"),\n              # add 'onclick' after rhino::build_sass()\n              # and rhino::build_js()\n              onclick = \"App.showHelp()\"),\n              \n              \n        ),\n        card_body(\n            span(\n              # use clicks \n1              clicks$ui(ns(\"clicks\")),\n              # use message \n              message$ui(ns(\"message\")),\n            ),\n            display$ui(ns(\"disp\"))\n          )\n        )\n      )\n    )\n}\n\n#' rap server\n#' @export\nserver &lt;- function(id) {\n  \n  moduleServer(id, function(input, output, session) {\n    \n    # collect variable inputs module server ----\n    selected_vars &lt;- var_inputs$server(id = \"vals\")\n    # collect aesthetic inputs module server ----\n    selected_aes &lt;- aes_inputs$server(id = \"aes\")\n    \n    # pass to display module server ----\n    display$server(\n      id = \"disp\",\n      var_inputs = selected_vars,\n      aes_inputs = selected_aes\n    )\n  })\n  \n2  moduleServer(id, function(input, output, session) {\n    clicks$server(\"clicks\")\n    message$server(\"message\")\n  })\n  \n}\n\n\n\n1\n\ninclude app/view/clicks.R and app/view/message.R modules in UI\n\n\n2\n\ninclude app/view/clicks.R and app/view/message.R modules in server\n\n\n\n\nThe new ‘clicks’ and ‘message’ buttons are visible when we launch our app:\n\n\n\n\n\n\n\nRunning Cypress tests\nCypress tests are stored in the tests/cypress/e2e/ folder:\ntests\n └── cypress\n        └── e2e\n             └── app.cy.js\n\nThe initial call to rhino::test_e2e() should note if it is your first time using cypress (and might include an update or two).22\n\nrhino::test_e2e()\n\n&gt; test-e2e\n&gt; start-server-and-test run-app http://localhost:3333 run-cypress\n\n1: starting server using command \"npm run run-app\"\nand when url \"[ 'http://localhost:3333' ]\" is responding with HTTP status code 200\nrunning tests using command \"npm run run-cypress\"\n\n\n&gt; run-app\n&gt; cd .. && Rscript -e \"shiny::runApp(port = 3333)\"\n\nLoading required package: shiny\n\nListening on http://127.0.0.1:3333\n&gt; run-cypress\n&gt; cypress run --project ../tests\n\nIt looks like this is your first time using Cypress: 13.6.2\n\n[STARTED] Task without title.\n[TITLE]  Verified Cypress!       /Users/mjfrigaard/Library/Caches/Cypress/13.6.2/Cypress.app\n[SUCCESS]  Verified Cypress!       /Users/mjfrigaard/Library/Caches/Cypress/13.6.2/Cypress.app\n\nOpening Cypress...\n\nDevTools listening on ws://127.0.0.1:51925/devtools/browser/a47246ab-14bd-4c51-ad24-fec911eeb2d8\n\nOpening `/dev/tty` failed (6): Device not configured\nresize:  can't open terminal /dev/tty\n================================================================================\n\n  (Run Starting)\n\n  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n  │ Cypress:        13.6.2                                                                         │\n  │ Browser:        Electron 114 (headless)                                                        │\n  │ Node Version:   v23.11.0 (/usr/local/Cellar/node/23.11.0/bin/node)                             │\n  │ Specs:          1 found (app.cy.js)                                                            │\n  │ Searched:       cypress/e2e/**/*.cy.{js,jsx,ts,tsx}                                            │\n  └────────────────────────────────────────────────────────────────────────────────────────────────┘\n\n\n────────────────────────────────────────────────────────────────────────────────────────────────────\n                                                                                                    \n  Running:  app.cy.js                                                                       (1 of 1)\n\n\n  app\n    ✓ starts (855ms)\n\n\n  1 passing (900ms)\n\n\n  (Results)\n\n  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n  │ Tests:        1                                                                                │\n  │ Passing:      1                                                                                │\n  │ Failing:      0                                                                                │\n  │ Pending:      0                                                                                │\n  │ Skipped:      0                                                                                │\n  │ Screenshots:  0                                                                                │\n  │ Video:        false                                                                            │\n  │ Duration:     0 seconds                                                                        │\n  │ Spec Ran:     app.cy.js                                                                        │\n  └────────────────────────────────────────────────────────────────────────────────────────────────┘\n\n\nOpening `/dev/tty` failed (6): Device not configured\nresize:  can't open terminal /dev/tty\n================================================================================\n\n  (Run Finished)\n\n       Spec                                              Tests  Passing  Failing  Pending  Skipped  \n  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n  │ ✔  app.cy.js                                903ms        1        1        -        -        - │\n  └────────────────────────────────────────────────────────────────────────────────────────────────┘\n    ✔  All specs passed!                        903ms        1        1        -        -        -  \nThe Cypress output lists the test file name as Spec or Specs, and gives us a detailed report of the test result and any artifacts (like videos or images).\n\n\nWriting Cypress tests\nI’ll include the first test for the app/view/message module from the rhino cypress tutorial in the tests/cypress/e2e/ folder:\n// tests/cypress/integration/message.cy.js\n\ndescribe(\"Show message\", () =&gt; {\n  beforeEach(() =&gt; {\n    cy.visit(\"/\");\n  });\n\n  it(\"'Show message' button exists\", () =&gt; {\n    cy.get(\".message button\").should(\"have.text\", \"Show message\");\n  });\n\n});\nI love the use of testthat’s BDD functions with cypress, because we can see the feature and scenario described in the test itself.\n\n\n\n\n\n\ncreateTcpServer: address already in use\n\n\n\n\n\n\nWhile running Cypress tests, you might see the following error:\nListening on http://127.0.0.1:3333\ncreateTcpServer: address already in use\nError in initialize(...) : Failed to create server\nCalls: &lt;Anonymous&gt; ... startApp -&gt; startServer -&gt; &lt;Anonymous&gt; -&gt; initialize\nExecution halted\nThis is likely caused by a previously run instance of the rhino app that wasn’t shut down properly.\nRun the following command in the Terminal to figure out what is using that specific port:\nlsof -i :3333\nUse the PID to kill the process:\nkill -9 &lt;PID&gt;\nYou can also change the default port used in Cypress tests in package.json:\n\"scripts\": {\n  \"run-app\": \"cd .. && Rscript -e \\\"shiny::runApp(port = 3334)\\\"\",\n  \"run-cypress\": \"cypress run\"\n}\nAnd the baseUrl in tests/cypress/cypress.config.js:\nbaseUrl: 'http://localhost:3334',\n\n\n\n\nAfter adding the test to tests/cypress/ and running the test with rhino::test_e2e(), we see the following output:\n&gt; test-e2e\n&gt; start-server-and-test run-app http://localhost:3333 run-cypress\n\n1: starting server using command \"npm run run-app\"\nand when url \"[ 'http://localhost:3333' ]\" is responding with HTTP status code 200\nrunning tests using command \"npm run run-cypress\"\n\n\n&gt; run-app\n&gt; cd .. && Rscript -e \"shiny::runApp(port = 3333)\"\n\nLoading required package: shiny\n\nListening on http://127.0.0.1:3333\n\n&gt; run-cypress\n&gt; cypress run --project ../tests\n\n\nDevTools listening on ws://127.0.0.1:54091/devtools/browser/d35cc929-720b-4c07-aaa9-b49eb4af56f9\n\nOpening `/dev/tty` failed (6): Device not configured\nresize:  can't open terminal /dev/tty\n================================================================================\n\n  (Run Starting)\n\n  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n  │ Cypress:        13.6.2                                                                         │\n  │ Browser:        Electron 114 (headless)                                                        │\n  │ Node Version:   v23.11.0 (/usr/local/Cellar/node/23.11.0/bin/node)                             │\n  │ Specs:          2 found (app.cy.js, message.cy.js)                                             │\n  │ Searched:       cypress/e2e/**/*.cy.{js,jsx,ts,tsx}                                            │\n  └────────────────────────────────────────────────────────────────────────────────────────────────┘\n\n\n────────────────────────────────────────────────────────────────────────────────────────────────────\n                                                                                                    \n  Running:  app.cy.js                                                                       (1 of 2)\n\n\n  app\n    ✓ starts (865ms)\n\n\n  1 passing (912ms)\n\n\n  (Results)\n\n  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n  │ Tests:        1                                                                                │\n  │ Passing:      1                                                                                │\n  │ Failing:      0                                                                                │\n  │ Pending:      0                                                                                │\n  │ Skipped:      0                                                                                │\n  │ Screenshots:  0                                                                                │\n  │ Video:        false                                                                            │\n  │ Duration:     0 seconds                                                                        │\n  │ Spec Ran:     app.cy.js                                                                        │\n  └────────────────────────────────────────────────────────────────────────────────────────────────┘\n\n\n────────────────────────────────────────────────────────────────────────────────────────────────────\n                                                                                                    \n  Running:  message.cy.js                                                                   (2 of 2)\n\n\n  Show message\n    ✓ 'Show message' button exists (990ms)\n    ✓ 'Show message' button shows the message' (1112ms)\n\n\n  2 passing (2s)\n\n\n  (Results)\n\n  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n  │ Tests:        2                                                                                │\n  │ Passing:      2                                                                                │\n  │ Failing:      0                                                                                │\n  │ Pending:      0                                                                                │\n  │ Skipped:      0                                                                                │\n  │ Screenshots:  0                                                                                │\n  │ Video:        false                                                                            │\n  │ Duration:     2 seconds                                                                        │\n  │ Spec Ran:     message.cy.js                                                                    │\n  └────────────────────────────────────────────────────────────────────────────────────────────────┘\n\n\nOpening `/dev/tty` failed (6): Device not configured\nresize:  can't open terminal /dev/tty\n================================================================================\n\n  (Run Finished)\n\n       Spec                                              Tests  Passing  Failing  Pending  Skipped  \n  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐\n  │ ✔  app.cy.js                                914ms        1        1        -        -        - │\n  ├────────────────────────────────────────────────────────────────────────────────────────────────┤\n  │ ✔  message.cy.js                            00:02        2        2        -        -        - │\n  └────────────────────────────────────────────────────────────────────────────────────────────────┘\n    ✔  All specs passed!                        00:03        3        3        -        -        -  \n\n\nExecution halted\n\n\nInteractive tests\nAfter adding the second test for the app/view/message module, we’ll run the test using interactive = TRUE, which opens the Cypress app window:\n\nrhino::test_e2e(interactive = TRUE)\n\n\n\n\n\n\n\n\nCypress app\n\n\nAfter the application opens, you’ll be able to select the browser (I have Chrome selected).\n\n\n\n\n\n\n\nChoose cypress browser\n\n\nAfter clicking on Start E2E Testing in Chromium, Cypress will launch the application in Chromium. You’ll see the tests in the sidebar:\n\n\n\n\n\n\n\nChrome tests\n\n\nSelect a test to open it and click on Run All Tests:\n\n\n\n\n\n\nFigure 1: Running tests\n\n\n\nThe Cypress documentation is worth reading through, because there are other features I haven’t covered here."
  },
  {
    "objectID": "rhino.html#recap",
    "href": "rhino.html#recap",
    "title": "the rhino framework",
    "section": "Recap",
    "text": "Recap\n\nMost of the development takes place in app/logic and app/view (using box modules). The separation of the ‘business logic’ workflow from the ‘app view’ code provides a nice division of labor for each module, and the use of box modules make it easy to move components into the application in app/main.R.\nNew JavaScript or CSS code requires a corresponding rhino (rhino::build_js() or rhino::build_sass()), and requires installing node.js.\n\nThese functions create output files in app/static/js/app.min.js and app/static/css/app.min.css that are used in the application.\n\nTesting with testthat is similar to a standard R package, but using box modules in tests takes some getting used to.\n\nCypress tests are an excellent way to perform end-to-end tests (faster than shinytest2), but requires some overhead in learning the syntax (which combines testthat functions with CSS selectors, etc.)."
  },
  {
    "objectID": "rhino.html#footnotes",
    "href": "rhino.html#footnotes",
    "title": "the rhino framework",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nThe code used to build the rhino app is available here.↩︎\nrhino has a ‘minimal app.R’ philosophy, and the call to rhino::app() performs multiple operations beyond shiny::runApp()↩︎\nRead more about how to use config.yml in the Environments section of the How to: Manage secrets and environments vignette.↩︎\nRead more about rhino.yml in the Explanation: Configuring Rhino - rhino.yml vignette. The code below showcases the optional arguments (and is not included in the application).↩︎\ndependencies.R is covered in the Manage Dependencies vignette on the package website.↩︎\nRead more about getting started with renv.↩︎\nTesting with Cypress is also covered in the ‘Use shinttest2 vignette’.↩︎\nRead more about rhino unit tests↩︎\nAdd-on packages can also be included in R packages by adding the @importFrom or @import tags from roxygen2, which writes the NAMESPACE directives↩︎\ninstall.packages() downloads and installs packages from a repo like CRAN or GitHub, and library (or require) loads and attaches the add-on packages to the search list.↩︎\nAdding a package to the Imports field in the DESCRIPTION will download/install the add-on package when your package is installed, but not attach it to the search list (the Depends field will install and attach the package).↩︎\nlibrary(tidyverse) is typically used to install the core tidyverse packages (ggplot2, dplyr, tidyr, readr, purrr, tibble, stringr, forcats), but this is not advised during package development.↩︎\nThis is how box “completely replaces the base R library and require functions” - box documentation.↩︎\nI’d start with “the hierarchy of module environments” vignette. I’ve also created a collection of box module examples in the rbox repo.↩︎\nrhino apps come with an app/logic/ folder, which is used to store code for “data manipulation, generating non-interactive plots and graphs, or connecting to an external data source, but outside of definable inputs, it doesn’t interact with or rely on shiny in any way.”↩︎\nThe movies.csv file comes from the 07_data branch of sap.↩︎\nThe __init__.R files are covered on the rhino website↩︎\nThese system tests are written for a Shiny app in a standard R package.↩︎\nThese steps are covered in the Appsilon article, ‘How-to: Use shinytest2’.↩︎\nThis is referenced in the Cypress tutorial when trying to identify the text output from the app/view/message module.↩︎\nThis test is covered in BDD test templates section of Shiny App-Packages.↩︎\nThe rhino documentation also mentions updates, ‘since this is the first time you use one of the functionalities that depend on Node.js, it needs to install all the required libraries. Don’t worry, this is just a one-time step and is done automatically.’↩︎"
  },
  {
    "objectID": "LICENSE.html",
    "href": "LICENSE.html",
    "title": "MIT License",
    "section": "",
    "text": "MIT License\nCopyright (c) 2024 sfw authors\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE."
  },
  {
    "objectID": "leprechaun.html",
    "href": "leprechaun.html",
    "title": "The leprechaun framework",
    "section": "",
    "text": "leprechaun apps are built much like standard R packages (built with devtools and usethis), but they’re designed with the intention of being a ‘leaner and smaller’ version of golem:1"
  },
  {
    "objectID": "leprechaun.html#package-versions",
    "href": "leprechaun.html#package-versions",
    "title": "The leprechaun framework",
    "section": "Package versions",
    "text": "Package versions\n\n\n\n\n\n\n\n\n\n\n\nPackage\nVersion\nTitle\nDescription\n\n\n\n\nleprechaun\n1.0.0.9001\nCreate Simple ‘Shiny’ Applications as Packages\nCode generator for robust dependency-free ‘Shiny’ applications in the form of packages. It includes numerous convenience functions to create modules, include utility functions to create common ‘Bootstrap’ elements, setup a project from the ground-up, and much more.\n\n\npacker\n0.1.3.9000\nAn Opinionated Framework for Using ‘JavaScript’\nEnforces good practice and provides convenience functions to make work with ‘JavaScript’ not just easier but also scalable. It is a robust wrapper to ‘NPM’, ‘yarn’, and ‘webpack’ that enables to compartmentalize ‘JavaScript’ code, leverage ‘NPM’ and ‘yarn’ packages, include ‘TypeScript’, ‘React’, or ‘Vue’ in web applications, and much more."
  },
  {
    "objectID": "leprechaun.html#getting-started",
    "href": "leprechaun.html#getting-started",
    "title": "The leprechaun framework",
    "section": "Getting started",
    "text": "Getting started\nCreate a leprechaun app just like you would a new R package (install devtools, which includes usethis as a dependency):\n\ninstall.packages('devtools')\nlibrary(devtools)\n\nLoading required package: usethis\nCreate a new package:\n\nusethis::create_package(\"lap\")\n\n\n✔ Creating '../projects/lap/'\n✔ Setting active project to '/Users/mjfrigaard/projects/lap'\n✔ Creating 'R/'\n✔ Writing 'DESCRIPTION'\n✔ Writing 'NAMESPACE'\n✔ Writing 'lap.Rproj'\n✔ Adding '^lap\\\\.Rproj$' to '.Rbuildignore'\n✔ Adding '.Rproj.user' to '.gitignore'\n✔ Adding '^\\\\.Rproj\\\\.user$' to '.Rbuildignore'\n✔ Opening '/Users/mjfrigaard/projects/lap/' in new RStudio session\n\nAfter the new project opens, install and load the leprechaun package, then run leprechaun::scaffold():2\n\ninstall.packages(\"leprechaun\")\nleprechaun::scaffold()"
  },
  {
    "objectID": "leprechaun.html#package-files",
    "href": "leprechaun.html#package-files",
    "title": "The leprechaun framework",
    "section": "Package files",
    "text": "Package files\nleprechaun::scaffold() results in the following folder tree:\n\n├── DESCRIPTION\n├── NAMESPACE\n├── R/\n│   ├── _disable_autoload.R\n│   ├── assets.R\n│   ├── hello.R\n│   ├── input-handlers.R\n│   ├── leprechaun-utils.R\n│   ├── run.R\n│   ├── server.R\n│   ├── ui.R\n│   └── zzz.R\n├── inst/\n│   ├── assets\n│   ├── dev\n│   ├── img\n│   └── run\n│       └── app.R\n├── lap.Rproj\n└── man\n    └── hello.Rd\n\n8 directories, 14 files\n\nThe standard R package files and folders (DESCRIPTION, NAMESPACE, R/, etc.) are accompanied by multiple sub-folders in inst/ (recall that inst/ contents are available in the package when the package is installed).3"
  },
  {
    "objectID": "leprechaun.html#getting-started-1",
    "href": "leprechaun.html#getting-started-1",
    "title": "The leprechaun framework",
    "section": "Getting Started",
    "text": "Getting Started\nThe following files are part of our initial application created with leprechaun::scaffold().\n\n\n\n\n\n\n.leprechaun\n\n\nThe .leprechaun lock file contains the package name, version, as well as versions of bootstrap and accompanying R files.\n\n\n\n\n\n\n\n\n\nDESCRIPTION\n\n\n\nshiny, bslib, htmltools and pkgload will automatically be added to the DESCRIPTION file\n\nThe remaining DESCRIPTION fields need to be entered manually (or with the desc package). See example below:\n\n\n\n\n\nPackage: lap\nTitle: leprechaun app-package \nVersion: 0.0.0.9000\nAuthor: John Smith &lt;John.Smith@email.io&gt; [aut, cre]\nMaintainer: John Smith &lt;John.Smith@email.io&gt;\nDescription: A movie-review leprechaun shiny application.\nLicense: GPL-3\nEncoding: UTF-8\nRoxygen: list(markdown = TRUE)\nLazyData: true\nImports: \n    bslib,\n    htmltools,\n    shiny\nSuggests: \n    pkgload\n\n\nLeave an empty final line in the DESCRIPTION file.\nAs promised, leprechaun app-packages can be spun up quickly with minimal commands. After loading and documenting lap, we can use the standalone app function run() to launch the app in Positron \n\n\n\n\n\n\n\nInitial leprechaun app"
  },
  {
    "objectID": "leprechaun.html#development",
    "href": "leprechaun.html#development",
    "title": "The leprechaun framework",
    "section": "Development",
    "text": "Development\nThe development workflow for a leprechaun application is similar to developing any app-package:\n\nusethis functions can be used to add R files, tests, vignettes, README.md/NEWS.md files, etc.\nuse devtools to load, document, and install.\n\n\nApplication code\nBefore we create any new files, we’re going to dive into the code that’s included in a new leprechaun app-package. Most of these files are in the R/ folder, but we can also new subfolders in inst/.\n\n\n\n\n\n\n└── R/\n    ├── _disable_autoload.R\n    ├── assets.R\n    ├── input-handlers.R\n    ├── leprechaun-utils.R\n    ├── run.R\n    ├── server.R\n    ├── ui.R\n    └── zzz.R\n\n\n└── inst/\n    ├── assets\n    ├── dev\n    ├── img\n    └── run\n        └── app.R\n\n\n\n\nUI and Server\nui.R holds the ui() and assets() functions, and server.R includes the core application server() function.\n\n\n\n\n\n\nApp UI\n\n\n#' Shiny UI\n#' \n#' Core UI of package.\n#' \n#' @param req The request object.\n#' \n#' @import shiny\n#' @importFrom bslib bs_theme\n#' \n#' @keywords internal\nui &lt;- function(req){\n    navbarPage(\n        theme = bs_theme(version = 4),\n        header = list(assets()),\n        title = \"lap\",\n        id = \"main-menu\",\n        tabPanel(\n            \"First tab\",\n            shiny::h1(\"First tab\")\n        ),\n        tabPanel(\n            \"Second tab\",\n            shiny::h1(\"Second tab\")\n        )\n    )\n}\n\n\n\n\n\n\n\n\n\nassets() loads the resources called in the R/assets.R file.\n\n\n#' Assets\n#' \n#' Includes all assets.\n#' This is a convenience function that wraps\n#' [serveAssets] and allows easily adding additional\n#' remote dependencies (e.g.: CDN) should there be any.\n#' \n#' @importFrom shiny tags\n#' \n#' @keywords internal\nassets &lt;- function(){\n    list(\n        serveAssets(), # base assets (assets.R)\n        tags$head(\n            # Place any additional depdendencies here\n            # e.g.: CDN\n        )   \n    )\n}\n\n\n\n\n\n\n\n\n\nserver() also includes make_send_message(session) from R/leprechaun-utils.R.\n\n\n#' Server\n#' \n#' Core server function.\n#' \n#' @param input,output Input and output list objects\n#' containing said registered inputs and outputs.\n#' @param session Shiny session.\n#' \n#' @noRd \n#' @keywords internal\nserver &lt;- function(input, output, session){\n    send_message &lt;- make_send_message(session)  \n}\n\n\n\n\n\nAssets\nThe R/assets.R functions handle how JavaScript and CSS files are loaded and served to the browser.\n\n\n\n\n\n\nserveAssets()\n\n\nScans and sorts JavaScript/CSS files and bundles everything as proper HTML dependencies that Shiny can use.\n\n\n\n\n\n\n\n\n\nremove_modules()\n\n\nFilters out the module files from the list of all JavaScript files.\n\n\n\n\n\n\n\n\n\nget_modules()\n\n\nExtracts only the module files from the list of all JavaScript files.\n\n\n\n\n\n\n\n\n\ncollapse_files()\n\n\nCreates a regular expression pattern to match specific files.\n\n\n\nExpand the code chunks below to view the functions in R/assets.R.\n\n\nshow/hide serveAssets()\n#' Dependencies\n#'\n#' @param modules JavaScript files names that require\n#' the `type = module`.\n#' @importFrom htmltools htmlDependency\n#'\n#' @keywords internal\nserveAssets &lt;- function(modules = NULL) {\n  # JavaScript files\n  javascript &lt;- list.files(\n    system.file(package = \"lap\"),\n    recursive = TRUE,\n    pattern = \".js$\"\n  )\n\n  modules &lt;- get_modules(javascript, modules)\n  javascript &lt;- remove_modules(javascript, modules)\n\n  # CSS files\n  css &lt;- list.files(\n    system.file(package = \"lap\"),\n    recursive = TRUE,\n    pattern = \".css$\"\n  )\n\n  # so dependency processes correctly\n  names(css) &lt;- rep(\"file\", length(css))\n  names(javascript) &lt;- rep(\"file\", length(javascript))\n\n  # serve dependencies\n  dependencies &lt;- list()\n\n  standard &lt;- htmlDependency(\n    \"lap\",\n    version = utils::packageVersion(\"lap\"),\n    package = \"lap\",\n    src = \".\",\n    script = javascript,\n    stylesheet = css\n  )\n  dependencies &lt;- append(dependencies, list(standard))\n\n  if (!is.null(modules)) {\n    modules &lt;- htmlDependency(\n      \"lap-modules\",\n      version = utils::packageVersion(\"lap\"),\n      package = \"lap\",\n      src = \".\",\n      script = modules,\n      meta = list(type = \"module\")\n    )\n    dependencies &lt;- append(dependencies, list(modules))\n  }\n\n  return(dependencies)\n}\n\n\n\n\nshow/hide remove_modules()\n#' Module\n#'\n#' Retrieve and add modules from a vector of files.\n#'\n#' @param files JavaScript files\n#' @param modules JavaScript files names that require\n#' the `type = module`.\n#' @importFrom htmltools htmlDependency\n#'\n#' @keywords internal\n#' @name js-modules\nremove_modules &lt;- function(files, modules) {\n  if (is.null(modules)) {\n    return(files)\n  }\n\n  # make pattern\n  pattern &lt;- collapse_files(modules)\n\n  # remove modules\n  files[!grepl(pattern, files)]\n}\n\n\n\n\nshow/hide get_modules()\n#' @rdname js-modules\n#' @keywords internal\nget_modules &lt;- function(files, modules) {\n  if (is.null(modules)) {\n    return(NULL)\n  }\n\n  # make pattern\n  pattern &lt;- collapse_files(modules)\n\n  # remove modules\n  files[grepl(pattern, files)]\n}\n\n\n\n\nshow/hide collapse_files()\n# collapse files into a pattern\ncollapse_files &lt;- function(files) {\n  pattern &lt;- paste0(files, collapse = \"$|\")\n  paste0(pattern, \"$\")\n}\n\n\n\n\nStandalone app function\nR/run.R contains functions to launch our Shiny application in different modes.\n\n\n\n\n\n\nrun() is the main function that users will call to launch our application in normal mode (production-ready).\n\n\nrun &lt;- function(...){\n    shinyApp(\n        ui = ui,\n        server = server,\n        ...\n    )\n}\n\n\n\n\n\n\n\n\n\nrun_dev() is for development purposes and launches a development version of our app (with local assets, etc.).\n\n\nrun_dev &lt;- function(){\n    file &lt;- system.file(\n              \"run/app.R\", \n              package = \"lap\"\n              )\n    shiny::shinyAppFile(file)\n}\n\n\n\n\n\nExternal resources\nThe inst/ folder contains the initial leprechaun scaffolding folders (assets, dev, img, and run) and a single inst/run/app.R file.4\n\n\n\n\n\n\ninst/assets\n\n\nThis folder is for storing front-end resources like JavaScript and CSS files (are automatically discovered by the serveAssets() function).\n\n\n\n\n\n\n\n\n\ninst/dev\n\n\nThis folder contains development-related files and tools not needed in production.\n\n\n\n\n\n\n\n\n\ninst/img\n\n\nThis folder contains static image files for the application. To add images to the application, R/zzz.R contains .onLoad(), a wrapper for system.file() and Shiny’s addResourcePath().\n\n\n\n\n\n\n\n\n\ninst/run\n\n\nThe inst/run/app.R contains calls to leprechaun::build() and pkgload::load_all() before running the app with run().5\n\n\n\n\n\nUtilities\n\n\n\n\n\n\nR/leprechaun-utils.R\n\n\nleprechaun-utils.R initially contains the make_send_message() function (which is used in the R/server.R above).\n\n\n\n\n\n\n\n\n\nR/input-handlers.R\n\n\n\nleprechaun_handler_df() and leprechaun_handler_list() are used for “converting the input received from the WebSocket to a data.frame/list.”\n\n.onAttach() registers the two input handlers above\nregisterInputHandler(): “When called, Shiny will use the function provided to refine the data passed back from the client (after being deserialized by jsonlite) before making it available in the input variable of the server.R file”)\n\n\n\n\n\n\n\n\n\n\n\nR/_disable_autoload.R\n\n\n_disable_autoload.R disables Shiny’s loadSupport(). By default, Shiny will load “any top-level supporting .R files in the R/ directory adjacent to the app.R/server.R/ui.R files.”\n\n\n\nExpand the code chunks below to view the functions in R/leprechaun-utils.R and R/input-handlers.R.\n\n\nshow/hide make_send_message()\n#' Create a Helper to Send Messages\n#'\n#' Create a function to send custom messages to the front-end,\n#' this function makes it such that the namespace is carried\n#' along.\n#' The namespace is appended as `ns`.\n#' The namespace with the optional hyphen is\n#' included as `ns2`.\n#'\n#' @param session Shiny session to derive namespace\n#' @param prefix A prefix to add to all types.\n#' Note that the prefix is followed by a hyphen `-`.\n#'\n#' @examples\n#' \\dontrun{\n#' send_message &lt;- make_send_message(session)\n#' send_message(\"do-sth\")\n#' send_message(\"do-sth-else\", x = 1)\n#'\n#' # with prefix\n#' send_message &lt;- make_send_message(session, prefix = \"PREFIX\")\n#'\n#' # this sends a mesasge of type:\n#' # PREFIX-so-th\n#' send_message(\"do-sth\")\n#' }\n#'\n#' @noRd\n#' @keywords internal\nmake_send_message &lt;- function(session, prefix = NULL) {\n  ns &lt;- session$ns(NULL)\n\n  ns2 &lt;- ns\n  if (length(ns) &gt; 0 && ns != \"\") {\n    ns2 &lt;- paste0(ns2, \"-\")\n  }\n\n  function(msgId, ...) {\n    if (!is.null(prefix)) {\n      msgId &lt;- sprintf(\"%s-%s\", prefix, msgId)\n    }\n\n    session$sendCustomMessage(\n      msgId,\n      list(\n        ns = ns,\n        ns2 = ns2,\n        ...\n      )\n    )\n  }\n}\n\n\n\n\nshow/hide leprechaun_handler_df()\n#' Input Dataframe\n#' \n#' Converts the input received from the WebSocket\n#' to a data.frame.\n#' \n#' @param data Input data received from WebSocket.\n#' \n#' @keywords internal\nleprechaun_handler_df &lt;- function(data){\n    do.call(\"rbind\", lapply(data))\n}\n\n\n\n\nshow/hide leprechaun_handler_list()\n#' Input List\n#' \n#' Forces the input received from the WebSocket \n#' to a list. This should really not be needed as\n#' it is handled like so by default.\n#' \n#' @param data Input data received from WebSocket.\n#' \n#' @keywords internal\nleprechaun_handler_list &lt;- function(data){\n    return(data)\n}\n\n\n\n\nshow/hide .onAttach()\n.onAttach &lt;- function(...) {\n    shiny::registerInputHandler(\n        \"lap.list\", \n        leprechaun_handler_list, \n        force = TRUE\n    )\n\n    shiny::registerInputHandler(\n        \"lap.df\", \n        leprechaun_handler_df, \n        force = TRUE\n    )\n}\n\n\n\n\nApplication code recap\n\n\n\n\n\n\nUI & Server\n\n\nThe UI and server functions in R/ui.R and R/server.R are the entry points of the leprechaun app, serving as wrappers that connect the app’s modules and centralize the UI layout and server logic (similar to golem apps).\n\n\n\n\n\n\n\n\n\nUtility functions\n\n\nleprechaun-utils.R contains utilities that help with communication between your R server and JavaScript front-end, and R/input-handlers.R sets up custom data handling between your JavaScript front-end and R back-end.\n\n\n\n\n\n\n\n\n\nAssets\n\n\nThe functions in R/assets.R are called with the assets() function in R/ui.R, which calls serveAssets() and includes all the front-end resources in our app. The inst/assets/ folder will contain any custom JavaScript or CSS files (or SCSS/SASS files) for styling.\n\n\n\n\n\n\n\n\n\nExternal resources\n\n\nThe inst/img/ folder will store images, which are loaded in the .onLoad() function in R/zzz.R file.\n\n\n\n\n\n\nWriting code\nBuilding leprechaun apps is similar to developing an R package. leprechaun has helper functions for adding modules6 and configuration7 files, but with fewer bells and whistles than golem.\n\nModules\nleprechaun has an add_module() helper function for creating modules. We’ll use it to add the two inputs and scatter display modules.\nmodule_scatter_display collects the data from module_vars and module_aes to create the plot with the custom scatter_plot() function:\n\nTo create the initial var_input module we’ll run:\n\nleprechaun::add_module(\"vars\")\n\n\nThis creates R/module_vars.R with functions for the UI and server portions of the Shiny module:\n\n\n#' vars UI\n#' \n#' @param id Unique id for module instance.\n#' \n#' @keywords internal\nvarsUI &lt;- function(id){\n    ns &lt;- NS(id)\n\n    tagList(\n        h2(\"var_input\")\n    )\n}\n\n#' vars Server\n#' \n#' @param id Unique id for module instance.\n#' \n#' @keywords internal\nvars_server &lt;- function(id){\n    moduleServer(\n        id,\n        function(\n            input, \n            output, \n            session\n            ){\n\n                ns &lt;- session$ns\n                send_message &lt;- make_send_message(session)\n\n                # your code here\n        }\n    )\n}\n\n# UI\n# var_inputUI('id')\n\n# server\n# var_input_server('id')\n\n\nNote the send_message &lt;- make_send_message(session) in var_input_server(). We’ll cover how this is used in the JavaScript section below.\n\n\n\n\n\n\nTip: Using @keywords internal\n\n\n\n\n\n\n{pkgname}-package.R\nThe leprechaun module contents are similar to the modules created with the golem helper function, but instead of using the @noRd tag, leprechaun modules include @keywords internal, which can be used in combination with a {pkgname}-package.R file to document your package.\n\nCall usethis::use_package_doc()\nAdd the following to {pkgname}-package.R:\n\n#' @keywords internal \n\"_PACKAGE\"\n\n\n\n\nThe code for the vars, aes and scatter_display modules are below.\n\n\nshow/hide module_vars.R\n#' vars UI\n#'\n#' @param id Unique id for module instance.\n#'\n#' @keywords internal\nvarsUI &lt;- function(id){\n    ns &lt;- NS(id)\n    tagList(\n        selectInput(\n          inputId = ns(\"y\"),\n          label = \"Y-axis:\",\n          choices = c(\n            \"IMDB rating\" = \"imdb_rating\",\n            \"IMDB number of votes\" = \"imdb_num_votes\",\n            \"Critics Score\" = \"critics_score\",\n            \"Audience Score\" = \"audience_score\",\n            \"Runtime\" = \"runtime\"\n          ),\n          selected = \"audience_score\"\n        ),\n        selectInput(\n          inputId = ns(\"x\"),\n          label = \"X-axis:\",\n          choices = c(\n            \"IMDB rating\" = \"imdb_rating\",\n            \"IMDB number of votes\" = \"imdb_num_votes\",\n            \"Critics Score\" = \"critics_score\",\n            \"Audience Score\" = \"audience_score\",\n            \"Runtime\" = \"runtime\"\n          ),\n          selected = \"imdb_rating\"\n        ),\n        selectInput(\n          inputId = ns(\"z\"),\n          label = \"Color by:\",\n          choices = c(\n            \"Title Type\" = \"title_type\",\n            \"Genre\" = \"genre\",\n            \"MPAA Rating\" = \"mpaa_rating\",\n            \"Critics Rating\" = \"critics_rating\",\n            \"Audience Rating\" = \"audience_rating\"\n          ),\n          selected = \"mpaa_rating\"\n        )\n      )\n}\n\n#' vars Server\n#'\n#' @param id Unique id for module instance.\n#'\n#' @keywords internal\nvars_server &lt;- function(id){\n    moduleServer(\n        id,\n        function(\n            input,\n            output,\n            session\n            ){\n\n                ns &lt;- session$ns\n                send_message &lt;- make_send_message(session)\n\n      return(\n        reactive({\n          list(\n            \"y\" = input$y,\n            \"x\" = input$x,\n            \"z\" = input$z\n          )\n        })\n      )\n        }\n    )\n}\n\n# UI\n# varsUI('id')\n\n# server\n# vars_server('id')\n\n\n\n\nshow/hide module_aes.R\n#' aes UI\n#'\n#' @param id Unique id for module instance.\n#'\n#' @keywords internal\naesUI &lt;- function(id){\n    ns &lt;- NS(id)\n    tagList(\n    sliderInput(\n      inputId = ns(\"alpha\"),\n      label = \"Alpha:\",\n      min = 0,\n      max = 1,\n      step = 0.1,\n      value = 0.7\n    ),\n    sliderInput(\n      inputId = ns(\"size\"),\n      label = \"Size:\",\n      min = 0,\n      max = 5,\n      step = 0.5,\n      value = 3\n    ),\n    textInput(\n      inputId = ns(\"plot_title\"),\n      label = \"Plot title\",\n      placeholder = \"Enter plot title\"\n    )\n    )\n}\n\n#' aes Server\n#'\n#' @param id Unique id for module instance.\n#'\n#' @keywords internal\naes_server &lt;- function(id){\n    moduleServer(\n        id,\n        function(\n            input,\n            output,\n            session\n            ){\n\n                ns &lt;- session$ns\n                send_message &lt;- make_send_message(session)\n\n      return(\n        reactive({\n          list(\n            \"alpha\" = input$alpha,\n            \"size\" = input$size,\n            \"plot_title\" = input$plot_title\n          )\n        })\n      )\n        }\n    )\n}\n\n# UI\n# aesUI('id')\n\n# server\n# aes_server('id')\n\n\n\n\nshow/hide module_scatter_display.R\n#' scatter_display UI\n#'\n#' @param id Unique id for module instance.\n#'\n#' @keywords internal\nscatter_displayUI &lt;- function(id){\n    ns &lt;- NS(id)\n  tagList(\n    tags$br(),\n    plotOutput(outputId = ns(\"scatterplot\"))\n  )\n}\n\n#' scatter_display Server\n#'\n#' @param id Unique id for module instance.\n#' @param var_inputs variable inputs\n#' @param aes_inputs aesthetic inputs\n#'\n#' @keywords internal\nscatter_display_server &lt;- function(id, var_inputs, aes_inputs){\n    moduleServer(\n        id,\n        function(\n            input,\n            output,\n            session\n            ){\n\n                ns &lt;- session$ns\n                send_message &lt;- make_send_message(session)\n\n    inputs &lt;- reactive({\n      plot_title &lt;- tools::toTitleCase(aes_inputs()$plot_title)\n        list(\n          x = var_inputs()$x,\n          y = var_inputs()$y,\n          z = var_inputs()$z,\n          alpha = aes_inputs()$alpha,\n          size = aes_inputs()$size,\n          plot_title = plot_title\n\n        )\n    })\n\n    output$scatterplot &lt;- renderPlot({\n      plot &lt;- scatter_plot(\n        # data --------------------\n        df = movies,\n        x_var = inputs()$x,\n        y_var = inputs()$y,\n        col_var = inputs()$z,\n        alpha_var = inputs()$alpha,\n        size_var = inputs()$size\n      )\n      plot +\n        ggplot2::labs(\n          title = inputs()$plot_title,\n            x = stringr::str_replace_all(tools::toTitleCase(inputs()$x), \"_\", \" \"),\n            y = stringr::str_replace_all(tools::toTitleCase(inputs()$y), \"_\", \" \")\n        ) +\n        ggplot2::theme_minimal() +\n        ggplot2::theme(legend.position = \"bottom\")\n    })\n        }\n    )\n}\n\n# UI\n# scatter_displayUI('id')\n\n# server\n# scatter_display_server('id')\n\n\nThe other components of lap were created using the standard usethis package development functions.\n\n\nUtility functions\n\n\n\n\n\n\nDEV BOX\n\n\n\n\n\n\nInclude update for https://g2r.opifex.org/ graphic!\n2025-04-09\n\n\n\n\nUse usethis::use_r() or create a new file in the R/ folder to add utility functions to lap. Expand the code chunks below to view our plotting utility function and bslib theme:\n\n\nshow/hide R/utils-scatter_plot.R\n#' The scatter plot utility function\n#'\n#' @description A custom graphing ggplot2 function\n#'\n#' @return The return value, if any, from executing the utility.\n#'\n#' @param df `data.frame` or `tibble`\n#' @param x_var string variable mapped to `x` axis\n#' @param y_var string variable mapped to `y` axis\n#'\n#'\n#' @importFrom rlang .data\n#'\n#' @export\n#'\nscatter_plot &lt;- function(df, x_var, y_var, col_var, alpha_var, size_var) {\n    ggplot2::ggplot(data = df,\n      ggplot2::aes(x = .data[[x_var]],\n          y = .data[[y_var]],\n          color = .data[[col_var]])) +\n      ggplot2::geom_point(alpha = alpha_var, size = size_var)\n}\n\n\n\n\nshow/hide R/lap_theme.R\n#' thematic leprechaun theme\n#'\n#' @returns bslib theme\n#'\n#' @export\n#'\nlap_theme &lt;- bslib::bs_theme(\n  bg = \"#ffffff\",\n  fg = \"#1a1a1a\",\n  primary = \"#3C9D5D\",   # green primary\n  secondary = \"#CCCCCC\",\n  success = \"#3C9D5D\",\n  info = \"#17A2B8\",\n  warning = \"#F0AD4E\",\n  danger = \"#D9534F\",\n  accent = \"#6C757D\",\n  base_font = bslib::font_google(\"Ubuntu\"),\n  heading_font = bslib::font_google(\"Raleway\")\n)\n\n\nAfter creating the modules and utility function, adding these to the UI (R/ui.R) and server (R/server.R) is straightforward.\n\n\nUI\nThe R/ui.R file will contain a navbarPage() layout by default, but we’ll update this with bslib.\n\n\nshow/hide R/ui.R\n#' Shiny UI\n#'\n#' Core UI of package.\n#'\n#' @param req The request object.\n#'\n#' @import shiny\n#' @importFrom bslib bs_theme\n#'\n#' @keywords internal\nui &lt;- function(req){\n  tagList(\n      bslib::page_fillable(\n        list(assets()),\n        title = \"Movie Reviews (lap)\",\n        theme = lap_theme,\n        bslib::layout_sidebar(\n          sidebar = bslib::sidebar(\n            varsUI(\"vars\"),\n            aesUI(\"aes\")\n          ),\n          bslib::card(\n            full_screen = TRUE,\n            bslib::card_body(\n              scatter_displayUI(\"plot\")\n            )\n          )\n        )\n      )\n  )\n}\n\n\n\n\nServer\nThe R/server.R file contains the three module server functions.\n\n\nshow/hide R/server.R\n#' Server\n#'\n#' Core server function.\n#'\n#' @param input,output Input and output list objects\n#' containing said registered inputs and outputs.\n#' @param session Shiny session.\n#'\n#' @noRd\n#' @keywords internal\nserver &lt;- function(input, output, session){\n    send_message &lt;- make_send_message(session)\n\n      selected_vars &lt;- vars_server(\"vars\")\n\n      selected_aes &lt;- aes_server(\"aes\")\n\n      scatter_display_server(\"plot\",\n                             var_inputs = selected_vars,\n                             aes_inputs = selected_aes)\n}\n\n\nBy default, the R/server.R file contains the make_send_message() function (which will be demonstrated below).8\nAfter loading, documenting, and installing lap, we can launch the application with run():\n\n\n\n\n\n\n\nlap with modules and utility functions\n\n\n\n\nAdding images\nTo add an image to the UI, we save the file (leprechaun-logo.png) in the inst/ folder:\n\n\n\n\n\n\nSave file to inst/img/\n\n\ninst/\n  └── img/\n       └── leprechaun-logo.png\n\n\n\n\n\n\n\n\n\nThen add the img/ path to the code to UI:\n\n\n  bslib::card_header(\n    tags$h4(tags$em(\"Brought to you by \",\n        tags$img(\n          src = \"img/leprechaun-logo.png\",\n          height = 100,\n          width = 100,\n          style = \"margin:10px 10px\"\n          )\n        )\n      )\n    )\n\n\n\nRun devtools::load_all(), devtools::document(), and devtools::install(upgrade = FALSE), then launch the application with run():\n\n\n\n\n\n\n\nAdding images to inst/img/\n\n\n\n\nAssets (JavaScript)\nleprechaun combines use_* and build functions to add functionality to Shiny apps. The external code files are stored in the inst/ folder.\nWe’ll briefly cover what this looks like with the packer JavaScript example from the package website. Be sure to install node and packer.\nEnter the following in the Terminal:\n\nbrew update\nbrew install node\n\nInstall the R package:\n\ninstall.packages('packer')\n# or \npak::pak(\"JohnCoene/packer\")\n\nBuild the packer scaffolding:9\n\n\n\n\n\n\npacker::scaffold_leprechaun()\n\n\n── Scaffolding leprechaun ──────────────────────────\n✔ Initialiased npm\n✔ webpack, webpack-cli, webpack-merge installed \n  with scope \"dev\" \n✔ Added npm scripts\n✔ Created srcjs directory\n✔ Created srcjs/config directory\n✔ Created webpack config files\n\n── Adding files to .gitignore and .Rbuildignore ──\n\n✔ Setting active project to \"/path/to/lap\".\n✔ Adding \"^srcjs$\" to .Rbuildignore.\n✔ Adding \"^node_modules$\" to .Rbuildignore.\n✔ Adding \"^package\\\\.json$\" to .Rbuildignore.\n✔ Adding \"^package-lock\\\\.json$\" to .Rbuildignore.\n✔ Adding \"^webpack\\\\.dev\\\\.js$\" to .Rbuildignore.\n✔ Adding \"^webpack\\\\.prod\\\\.js$\" to .Rbuildignore.\n✔ Adding \"^webpack\\\\.common\\\\.js$\" to .Rbuildignore.\n✔ Adding \"node_modules\" to .gitignore.\n\n\n── Scaffold built ──\n\nℹ Run `bundle` to build the JavaScript files\nℹ Run `leprechaun::use_packer()`\n\n\n\nThe following files and folders will be added to the lap root folder:\n\n\nshow/hide node_modules/ files\n├── node_modules/\n│   ├── @discoveryjs\n│   ├── @jridgewell\n│   ├── @types\n│   ├── @webassemblyjs\n│   ├── @webpack-cli\n│   ├── @xtuc\n│   ├── acorn\n│   ├── acorn-import-assertions\n│   ├── ajv\n│   ├── ajv-keywords\n│   ├── browserslist\n│   ├── buffer-from\n│   ├── caniuse-lite\n│   ├── chrome-trace-event\n│   ├── clone-deep\n│   ├── colorette\n│   ├── commander\n│   ├── cross-spawn\n│   ├── electron-to-chromium\n│   ├── enhanced-resolve\n│   ├── envinfo\n│   ├── es-module-lexer\n│   ├── escalade\n│   ├── eslint-scope\n│   ├── esrecurse\n│   ├── estraverse\n│   ├── events\n│   ├── fast-deep-equal\n│   ├── fast-json-stable-stringify\n│   ├── fastest-levenshtein\n│   ├── find-up\n│   ├── flat\n│   ├── function-bind\n│   ├── glob-to-regexp\n│   ├── graceful-fs\n│   ├── has-flag\n│   ├── hasown\n│   ├── import-local\n│   ├── interpret\n│   ├── is-core-module\n│   ├── is-plain-object\n│   ├── isexe\n│   ├── isobject\n│   ├── jest-worker\n│   ├── json-parse-even-better-errors\n│   ├── json-schema-traverse\n│   ├── kind-of\n│   ├── loader-runner\n│   ├── locate-path\n│   ├── merge-stream\n│   ├── mime-db\n│   ├── mime-types\n│   ├── neo-async\n│   ├── node-releases\n│   ├── p-limit\n│   ├── p-locate\n│   ├── p-try\n│   ├── path-exists\n│   ├── path-key\n│   ├── path-parse\n│   ├── picocolors\n│   ├── pkg-dir\n│   ├── punycode\n│   ├── randombytes\n│   ├── rechoir\n│   ├── resolve\n│   ├── resolve-cwd\n│   ├── resolve-from\n│   ├── safe-buffer\n│   ├── schema-utils\n│   ├── serialize-javascript\n│   ├── shallow-clone\n│   ├── shebang-command\n│   ├── shebang-regex\n│   ├── source-map\n│   ├── source-map-support\n│   ├── supports-color\n│   ├── supports-preserve-symlinks-flag\n│   ├── tapable\n│   ├── terser\n│   ├── terser-webpack-plugin\n│   ├── undici-types\n│   ├── update-browserslist-db\n│   ├── uri-js\n│   ├── watchpack\n│   ├── webpack\n│   ├── webpack-cli\n│   ├── webpack-merge\n│   ├── webpack-sources\n│   ├── which\n│   └── wildcard\n├── package-lock.json\n├── package.json\n├── srcjs/\n│   ├── config\n│   ├── index.js\n│   └── modules\n├── webpack.common.js\n├── webpack.dev.js\n└── webpack.prod.js\n\n106 directories, 36 files\n\n\nNow that the packer scaffolding is in place, we can run leprechaun::use_packer(), which creates the inst/dev/packer.R and adds packer to the DESCRIPTION.\n\n\n\n\n\n\nleprechaun::use_packer()\n\n\n✔ Creating inst/dev/packer.R\n✔ Adding 'packer' to Suggests in DESCRIPTION\n! This requires `leprechaun::build()` or the\n! `leprechaun::build_roclet`\n\n\n\nThe inst/dev/packer.R file contains the following:\n\n\nshow/hide inst/dev/packer.R\n#' Bundle for Prod\n#' \n#' Bundles packer using packer.\npacker_bundle &lt;- function(){\n    has_packer &lt;- requireNamespace(\"packer\", quietly = TRUE)\n\n    if (!has_packer) {\n        warning(\n            \"Requires `packer` package: `install.packages('packer')`\\n\", \n            \"Skipping.\",\n            call. = FALSE\n        )\n        return()\n    }\n\n    packer::bundle()\n}\n\npacker_bundle()\n\n\nThe final step is to build or ‘bundle’ the JavaScript files.\n\n\n\n\n\n\nleprechaun::build()\n\n\n✔ Running packer.R\n✔ Bundled  \n\n\n\nleprechaun::build() runs the contents of inst/dev/packer.R to bundle the JavaScript code.\n\n“Do not call this function from within the app. It helps build things, not run them.” - build.md guide\n\nLets review the new files that have been added to lap:\n\n\n\n\n\n\nIn the inst/dev/ folder, the packer.R file has been added, which calls packer::bundle():\n\n\ninst/dev/\n      └── packer.R\n\n1 directory, 1 file\n\n\n\n\n\n\n\n\n\nIn the srcjs/ folder, index.js and modules/message.js create the alert with Shiny.addCustomMessageHandler:\n\n\nsrcjs/\n    ├── config\n    │   ├── entry_points.json\n    │   ├── externals.json\n    │   ├── loaders.json\n    │   ├── misc.json\n    │   └── output_path.json\n    ├── index.js\n    └── modules\n        └── message.js\n\n\n\n\n\n\n\n\n\nAdd the following to R/server.R\n\n\nsend_message &lt;- make_send_message(session)\nsend_message(\"show-packer\",\n              text = \"a message from R/server.R\")\n\n\n\nWe can also include messages from modules.\n\n\n\n\n\n\nR/module_plot_display.R\n\n\nsend_message &lt;- make_send_message(session)\nsend_message(\"show-packer\",\n  text = \"a message from R/module_plot_display.R\")\n\n\n\nAfter running devtools::load_all() and devtools::document(), the application loads with an alert.\n\n\n\n\n\n\n\nJavaScript alert\n\n\n\n\n\n\n\n\nJS Alerts in Positron\n\n\n\n\n\n\nIf you’re using Positron , you’ll have to display the application in the browser to view the alert.\n\n\n\n\nRead more about sending JavaScript messages here on the shiny website.\n\n\nAssets (Sass)\nWe can add Sass styling to our leprechaun app using the use_sass() helper function.10\n\n\n\n\n\n\nleprechaun::use_sass()\n\n\n✔ Creating scss\n✔ Creating inst/dev/sass.R\n✔ Adding 'sass' to Suggests in DESCRIPTION\n✔ Adding \"^scss$\" to .Rbuildignore.\n! This requires `leprechaun::build()` or the \n! `leprechaun::build_roclet`\n\n\n\n\n\n\n\n\n\nNew files in scss/:\n\n\nscss\n├── _core.scss\n└── main.scss\n\n1 directory, 2 files\n\n\n\nThe scss/ folder created by leprechaun::use_sass() includes _core.scss and main.scss. We’ll change the original .error in _core.scss from red to green level-four-headers (h4) using $accent: #38B44A;:\n\n\n\n\n\n\n/* original file */\nhtml{\n    .error {\n        color: red\n    }\n}\n\n\n/* updated file */\n$accent: #38B44A;\n\nhtml{\n    h4 {\n        color: $accent;\n    }\n}\n\n\n\nThen run leprechaun::build() to bunlde the SCSS files.\n\n\n\n\n\n\nleprechaun::build()\n\n\n✔ Running packer.R\n✔ Bundled       \n✔ Running sass.R\n\n\n\nThe inst/dev/sass.R file contains a sass_build() function. sass_build() looks in the scss/ folder for main.scss and creates the inst/assets/style.min.css file:\n\n#' Build CSS\n#' \n#' Build the sass\nsass_build &lt;- function(){\n    has_sass &lt;- requireNamespace(\"sass\", quietly = TRUE)\n\n    if(!has_sass){\n        warning(\n            \"Requires `sass` package: `install.packages('sass')`\\n\", \n            \"Skipping.\",\n            call. = FALSE\n        )\n        return()\n    }\n\n    output &lt;- sass::sass(\n        sass::sass_file(\n            'scss/main.scss'\n        ),\n        cache = NULL,\n        options = sass::sass_options(\n            output_style='compressed'\n        ),\n        output = 'inst/assets/style.min.css'\n    )\n    invisible(output)\n}\n\nsass_build()\n\nOnce again, I run devtools::load_all(), devtools::document(), and devtools::install(), then run():\n\n\n\n\n\n\n\nUpdates to h4() in lap\n\n\nThe assets/ folder contains the files generated by the .R scripts in the dev/ folder.\n\n\n\n\n\n\ninst/assets/\n\n\ninst/assets/\n    ├── index.js\n    └── style.min.css\n\n1 directory, 2 files\n\n\n\n\n\n\n\n\n\ninst/dev/\n\n\ninst/dev\n    ├── packer.R\n    └── sass.R\n\n1 directory, 2 files\n\n\n\ninst/dev/sass.R creates inst/assets/style.min.css and inst/dev/packer.R creates inst/assets/index.js.\nAfter running leprechaun::use_sass() and leprechaun::build(), we’ll check the serveAssets() function:\n\nlap:::serveAssets()\n\n[[1]]\nList of 10\n $ name      : chr \"lap\"\n $ version   : chr \"0.0.0.9000\"\n $ src       :List of 1\n  ..$ file: chr \".\"\n $ meta      : NULL\n $ script    : Named chr \"assets/index.js\"\n  ..- attr(*, \"names\")= chr \"file\"\n $ stylesheet: Named chr \"assets/style.min.css\"\n  ..- attr(*, \"names\")= chr \"file\"\n $ head      : NULL\n $ attachment: NULL\n $ package   : chr \"lap\"\n $ all_files : logi TRUE\n - attr(*, \"class\")= chr \"html_dependency\"\nThe output shows that stylesheet has been updated with \"assets/style.min.css\" and script has been updated with \"assets/index.js\" (these files are loaded into the application when it runs).\n\n\nWriting code recap\nleprechaun app-packages have a flexible and lightweight structure, and they are less opinionated than golem.\n\n\n\n\n\n\nAdding modules\n\n\nThe add_module() function can be used to create new module files. The naming convention is less standardized than golems helper function, but the functionality is the same.\n\n\n\n\n\n\n\n\n\nAdding utility functions\n\n\nleprechaun comes with utilities (_utils) helpers (use_html_utils(), use_endpoints_utils(), use_js_utils()), and additional functions can be created using the usethis package.\n\n\n\n\n\n\n\n\n\nAdding non-R files\n\n\nNon-R files (JavaScript, SCSS, etc.) are included in the respective inst/assets/ folder, which an accompanying helper function in inst/dev.\n\n\n\n\n\n\nData\nAfter calling usethis::use_data_raw('movies'), I can use system.file() to locate the movies.RData file with the following code in data-raw/movies.R:\n\n## code to prepare `movies` dataset goes here\npth &lt;- system.file('extdata/movies.RData', package = 'lap')\nload(pth)\nusethis::use_data(movies, overwrite = TRUE)\n\n\n\nLaunch\nInclude the call to thematic::thematic_shiny() in the R/run.R file (above the call to shinyApp()).\n\nrun &lt;- function(...){\n  thematic::thematic_shiny()\n    shinyApp(\n        ui = ui,\n        server = server,\n        ...\n    )\n}\n\nTo launch the application in lap with an app.R file, leprechaun has a add_app_file() function. This creates a file similar to inst/run/app.R:\n\n# Launch the ShinyApp \n# do not remove to keep push deploy button\n# from RStudio\npkgload::load_all(\n    reset = TRUE,\n    helpers = FALSE\n)\n\nrun()\n\n\n\nUnit tests\nThe unit tests for the utility function and the module server functions are in the tests/testthat/ folder:\ntests\n├── testthat\n│   ├── helper.R\n│   ├── test-module_aes.R\n│   ├── test-module_scatter_display.R\n│   ├── test-module_vars.R\n│   └── test-utils_scatter_plot.R\n└── testthat.R\n\n2 directories, 6 files\nleprechaun relies on the testthat framework for testing.11 I’ve included the BDD functions (describe() and it()) to make each behavior and test clear.\n\n\nSystem tests\nSystem tests can also be included with shinytest2 in lap similar to those in golem:\n\nlibrary(shinytest2)\ntest_that(\"{shinytest2} recording: leprechaun app\", {\n  app &lt;- AppDriver$new(name = \"lap-01\", height = 800, width = 1173)\n  app$set_inputs(`vars-y` = \"imdb_num_votes\")\n  app$set_inputs(`vars-x` = \"critics_score\")\n  app$set_inputs(`vars-z` = \"genre\")\n  app$set_inputs(`aes-alpha` = 0.7)\n  app$set_inputs(`aes-size` = 3)\n  app$set_inputs(`aes-plot_title` = \"New plot title\")\n  app$expect_values()\n})\n\n\n\nConfigure\nleprechaun app configuration files use the config package (similar to golem). leprechaun doesn’t assume I’ll be using a config.yml file, but we can easily add one with leprechaun::use_config().\n\n\n\n\n\n\nleprechaun::use_config()\n\n\nAdds inst/config.yml and R/config.R and includes yaml to the Imports field in our DESCRIPTION.\n\n\n\n\n\n\n\n\n\ninst/config.yml\n\n\nDefaults to production: true, which can be read using config_read() in R/config.R.\n\n\n\n\n\n\n\n\n\nlap:::config_read()\n\n\n$production\n[1] TRUE\n\n\n\nValues can be added to inst/config.yml using the config file format, then the CONFIG_FILE can be set as an environmental variable"
  },
  {
    "objectID": "leprechaun.html#dependencies",
    "href": "leprechaun.html#dependencies",
    "title": "The leprechaun framework",
    "section": "Dependencies",
    "text": "Dependencies\nIs our leprechaun app ‘leaner and smaller’ than a golem app? Well, leprechaun doesn’t add itself as a dependency (i.e., no need to add leprechaun to the list of Imports in the DESCRIPTION or NAMESPACE).\nFor example, lap depends on shiny, but not leprechaun.\n\npak::local_dev_deps_explain(\n  deps = \"shiny\", \n  root = \"_apps/lap\")\n\n lap -&gt; shiny\n\n\npak::local_dev_deps_explain(\n  deps = \"leprechaun\", \n  root = \"_apps/lap\")\n\n x leprechaun\n\nHowever, adding functionality and features with packer and the use_* functions can add dependencies to your leprechaun app:\n\npak::local_dev_deps_explain(\n  deps = \"packer\", \n  root = \"_apps/lap\")\n\n lap -&gt; packer\n\n\npak::local_dev_deps_explain(\n  deps = \"sass\", \n  root = \"_apps/lap\")\n\n lap -&gt; bslib -&gt; sass\n\n lap -&gt; shiny -&gt; bslib -&gt; sass\n\n lap -&gt; packer -&gt; htmlwidgets -&gt; rmarkdown -&gt;\n\n   bslib -&gt; sass\n\n lap -&gt; sass\n\nThe section titled, ‘the golem in the room’ on the package website is worth reading because it covers the differences between the two packages (and why you might choose one over the other).”\nThe final folder tree for lap (a leprechaun app-package) is below.\n├── DESCRIPTION\n├── NAMESPACE\n├── R/\n│   ├── _disable_autoload.R\n│   ├── assets.R\n│   ├── config.R\n│   ├── data.R\n│   ├── input-handlers.R\n│   ├── lap_theme.R\n│   ├── leprechaun-utils.R\n│   ├── module_aes.R\n│   ├── module_scatter_display.R\n│   ├── module_vars.R\n│   ├── run.R\n│   ├── server.R\n│   ├── ui.R\n│   ├── utils-scatter_plot.R\n│   ├── utils-tests.R\n│   └── zzz.R\n├── README.Rmd\n├── README.md\n├── app.R\n├── data/\n│   └── movies.rda\n├── data-raw/\n│   └── movies.R\n1├── inst/\n│   ├── assets\n│   ├── config.yml\n│   ├── dev\n│   ├── extdata\n│   ├── img\n│   └── run\n├── lap.Rproj\n2├── node_modules/\n├── package-lock.json\n├── package.json\n├── srcjs/\n│   ├── config\n│   ├── index.js\n│   ├── leprechaun-utils.js\n│   └── modules\n├── webpack.common.js\n├── webpack.dev.js\n├── webpack.prod.js\n3├── scss/\n│   ├── _core.scss\n│   └── main.scss\n└── tests/\n    ├── testthat\n    └── testthat.R\n\n109 directories, 63 files\n\n1\n\nleprechaun apps are packages, so the inst/ folders are available to the application at runtime.\n\n2\n\nFiles and folders created with packer::scaffold_leprechaun()\n\n\n3\n\nFiles and folders created with leprechaun::use_sass()\n\n\nThe output from system.file(\".\", package = \"lap\") has been passed to fs::dir_tree() below:\n\n├── DESCRIPTION\n├── INDEX\n├── Meta\n│   ├── Rd.rds\n│   ├── data.rds\n│   ├── features.rds\n│   ├── hsearch.rds\n│   ├── links.rds\n│   ├── nsInfo.rds\n│   └── package.rds\n├── NAMESPACE\n├── R\n│   ├── lap\n│   ├── lap.rdb\n│   └── lap.rdx\n├── assets\n│   ├── index.js\n│   └── style.min.css\n├── config.yml\n├── data\n│   ├── Rdata.rdb\n│   ├── Rdata.rds\n│   └── Rdata.rdx\n├── dev\n│   ├── packer.R\n│   └── sass.R\n├── extdata\n│   └── movies.RData\n├── help\n│   ├── AnIndex\n│   ├── aliases.rds\n│   ├── lap.rdb\n│   ├── lap.rdx\n│   └── paths.rds\n├── html\n│   ├── 00Index.html\n│   └── R.css\n├── img\n│   └── leprechaun-logo.png\n└── run\n    └── app.R\n\nAs we can see, none of the additional files and folders created with leprechaun are installed from the source code."
  },
  {
    "objectID": "leprechaun.html#recap",
    "href": "leprechaun.html#recap",
    "title": "The leprechaun framework",
    "section": "Recap",
    "text": "Recap\nleprechaun delivers on its promise to be a ‘leaner and smaller’ version of golem.\n\nTailored for developers who want to use modern JavaScript, HTML, and CSS workflows.\n\nMultiple inst/ sub-folders makes adding assets to the application easier, and leprechaun has a long list of use_* functions for including Sass, CSS, HTML, and JavaScript.\n\n\nleprechaun doesn’t offer much help with testing, although this can be done using testthat and shinytest2 (just as we would with a standard R package), and leprechaun leaves many of the architectural decisions to the developer.\n\nThe package website has examples for getting started and adding multiple resources, but unfortunately the function reference had limited documentation.\n\n\nBelow is an overview of the features/functions in the leprechaun framework:\n\n\n\n\nFeature\nArguments/Options\nDescription/Comments\n\n\n\n\nscaffold()\nui: can be one of \"navbarPage\" or \"fluidPage\"\nbs_version: Bootstrap version\noverwrite : recreate folder structure\nThe initial ‘setup’ function that builds the leprechaun files in R/ and inst/\n\n\nscaffold_leprechaun() (from packer)\nreact : include React?\nvue : include Vue?\nuse_cdn : use the CDN for react or vue dependencies?\nedit : open pertinent files\nThis function comes from the packer package for integrating JS with R.\nThis creates the following non-standard R package folders and files:\n\nsrcjs/ and node_modules/\npackage-lock.json, package.json, webpack.common.js, webpack.dev.js, and webpack.prod.js files\n\nThese non-standard folders are added to the .Rbuildignore and .gitignore (but it would be nice to know more about what they do).\n\n\nuse_packer()\nAssumes scaffold_leprechaun() from packer has been run\nSets up application to use packer utilities for bundling JavaScript.\n\nCreates inst/dev/packer.R\nAdds packer to Suggests in DESCRIPTION\n\n\n\nbuild()\nReturns TRUE/FALSE if build was successful.\nUsed to ‘bundle’ various resources (i.e., from packer and the other use_ functions)\n\n\nuse_sass()\n\nCreates inst/dev/sass.R\nAdds sass to DESCRIPTION under Suggests\n\n\nuse_html_utils()\nAdds R/html-utils.R\nAdds htmltools to Imports field in DESCRIPTION\nR/html-utils.R contains a variety of utility functions using HTML tags (i.e., span(), div(), etc.)\n\n\nuse_endpoints_utils()\nAdds R/endpoint-utils.R\nAdds jsonlite to Imports field in DESCRIPTION\nR/endpoint-utils.R contains utility functions for creating an HTTP response object and the LEPRECHAUN_SERIALISER environmental variable.\n\n\nuse_js_utils()\nAdds srcjs/leprechaun-utils.js and R/utils-js.R\nAdds import statement to srcjs/index.js\nRequires running leprechaun::build() to bundle .js\n\n\nuse_config()\nAdds R/config.R and inst/config.yml\ninst/config.yml initially contains production: true\nAdds yml to Imports field in DESCRIPTION\nR/config.R contains functions for reading and getting configuration values.\n\n\nadd_module()\nUsing add_module(\"name\") :\n\nCreates R/module_name.R\nUI function: nameUI()\nServer function: name_server()\n\nIt would be nice if the modules had consistent naming (the UI function uses camelCase() and the server function is snake_case()).\nBy default, modules aren’t exported (i.e., with @export), but are included in the package index (i.e., with @keywords internal)\nEach module automatically includes:\nsend_message &lt;- make_send_message(session)\n\n\nadd_app_file()\nAdds app.R file to root directory.\nIncludes call to pkgload::load_all() with reset set to TRUE and helpers set to FALSE\nHandy for quickly launching the app during development (and deployment).\n\n\n.onLoad()\nUsed to add external files to app (images, html, etc.)\nCombines Shiny’s addResourcePath() and system.file().\n\n\nserveAssets()\nmodules argument can be used to include JavaScript modules\nAdds dependencies for JavaScript, CSS, and HTML."
  },
  {
    "objectID": "leprechaun.html#footnotes",
    "href": "leprechaun.html#footnotes",
    "title": "The leprechaun framework",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nDownload the code used to build the leprechaun app here↩︎\nThe leprechaun::scaffold() defaults to a navbarPage(), but you can switch to a fluidPage() or change the Bootstrap version (“If shiny &gt; 1.6 is installed defaults to version 5, otherwise version 4” ).↩︎\nWe can remove R/hello.R and man/hello.Rd files. These are just examples from usethis::create_package().↩︎\nassets, dev, and img will initially contain .gitkeep files (a convention used by developers to force Git to include an otherwise empty directory in a repository).↩︎\ninst/run/app.R is not run directly. The leprechaun::add_app_file() will create an app.R file for your app-package.↩︎\nAdd a module with leprechaun::add_module().↩︎\nAdd a configuration file with leprechaun::use_config(quiet = FALSE).↩︎\nNote the R/server.R function is not exported from the package by default (i.e., the @noRd tag is included with @keywords internal).↩︎\npacker::scaffold_leprechaun() initializes the npm package manager for JavaScript, installs webpack, and adds the necessary JavaScript files and folders↩︎\nThis Sass example is from the package website.↩︎\ntestthat can be used for testing utility functions and module functions (as shown here).↩︎"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Shiny frameworks",
    "section": "",
    "text": "This website is a resource for Shiny developers to get an ‘under the hood’ view of three popular frameworks."
  },
  {
    "objectID": "index.html#golem",
    "href": "index.html#golem",
    "title": "Shiny frameworks",
    "section": "Golem",
    "text": "Golem\n\n\n\n\n\n\n\n\n\n\n\n\n\ngap: a golem app-package\n\n\n\nDownload the gap source code."
  },
  {
    "objectID": "index.html#leprechaun",
    "href": "index.html#leprechaun",
    "title": "Shiny frameworks",
    "section": "Leprechaun",
    "text": "Leprechaun\n\n\n\n\n\n\n\n\n\n\n\n\n\nlap: a leprechaun app-package\n\n\n\nDownload the lap source code.."
  },
  {
    "objectID": "index.html#rhino",
    "href": "index.html#rhino",
    "title": "Shiny frameworks",
    "section": "Rhino",
    "text": "Rhino\n\n\n\n\n\n\n\n\n\n\n\n\n\nrap: a rhino app (pseudo-package)1\n\n\n\nDownload the rap source code.\n\nSource application\nThe original data and code for each application comes from Building Web Applications With Shiny,2 and I’ve made some small changes to provide a basic (but realistic) example of a monolithic app.R file.\nYou can download the application movies dataset here.).\n\n\nshow/hide movies app\n# source: https://rstudio-education.github.io/shiny-course/\n\n# packages ----\nlibrary(shiny)\nlibrary(shinythemes)\nlibrary(ggplot2)\nlibrary(tools)\n\n# load data ----\nload(\"movies.RData\")\n\n# utility function for plotting ----\nscatter_plot &lt;- function(df, x_var, y_var, col_var, alpha_var, size_var) {\n    ggplot(data = df,\n      aes(x = .data[[x_var]],\n          y = .data[[y_var]],\n          color = .data[[col_var]])) +\n      geom_point(alpha = alpha_var, size = size_var)\n\n}\n# app ----\nui &lt;- fluidPage(\n  theme = shinytheme(\"spacelab\"),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\n        inputId = \"y\",\n        label = \"Y-axis:\",\n        choices = c(\n          \"IMDB rating\" = \"imdb_rating\",\n          \"IMDB number of votes\" = \"imdb_num_votes\",\n          \"Critics Score\" = \"critics_score\",\n          \"Audience Score\" = \"audience_score\",\n          \"Runtime\" = \"runtime\"\n        ),\n        selected = \"audience_score\"\n      ),\n      selectInput(\n        inputId = \"x\",\n        label = \"X-axis:\",\n        choices = c(\n          \"IMDB rating\" = \"imdb_rating\",\n          \"IMDB number of votes\" = \"imdb_num_votes\",\n          \"Critics Score\" = \"critics_score\",\n          \"Audience Score\" = \"audience_score\",\n          \"Runtime\" = \"runtime\"\n        ),\n        selected = \"critics_score\"\n      ),\n      selectInput(\n        inputId = \"z\",\n        label = \"Color by:\",\n        choices = c(\n          \"Title Type\" = \"title_type\",\n          \"Genre\" = \"genre\",\n          \"MPAA Rating\" = \"mpaa_rating\",\n          \"Critics Rating\" = \"critics_rating\",\n          \"Audience Rating\" = \"audience_rating\"\n        ),\n        selected = \"mpaa_rating\"\n      ),\n      sliderInput(\n        inputId = \"alpha\",\n        label = \"Alpha:\",\n        min = 0, max = 1,\n        value = 0.4\n      ),\n      sliderInput(\n        inputId = \"size\",\n        label = \"Size:\",\n        min = 0, max = 5,\n        value = 3\n      ),\n      textInput(\n        inputId = \"plot_title\",\n        label = \"Plot title\",\n        placeholder = \"Enter text to be used as plot title\"\n      ),\n      actionButton(\n        inputId = \"update_plot_title\",\n        label = \"Update plot title\"\n      )\n    ),\n    mainPanel(\n      br(),\n      p(\n        \"These data were obtained from\",\n        a(\"IMBD\", href = \"http://www.imbd.com/\"), \"and\",\n        a(\"Rotten Tomatoes\", href = \"https://www.rottentomatoes.com/\"), \".\"\n      ),\n      p(\n        \"The data represent\",\n        nrow(movies),\n        \"randomly sampled movies released between 1972 to 2014 in the United States.\"\n      ),\n      plotOutput(outputId = \"scatterplot\"),\n      hr(),\n      p(em(\n        \"The code for this Shiny application comes from\",\n        a(\"Building Web Applications with shiny\",\n          href = \"https://rstudio-education.github.io/shiny-course/\"\n        )\n      ))\n    )\n  )\n)\n\nserver &lt;- function(input, output, session) {\n  \n  new_plot_title &lt;- reactive({\n    toTitleCase(input$plot_title)\n  }) |&gt;\n    bindEvent(input$update_plot_title,\n      ignoreNULL = FALSE,\n      ignoreInit = FALSE\n    )\n\n\n  output$scatterplot &lt;- renderPlot({\n    scatter_plot(\n      # load movies data \n      df = movies,\n      x_var = input$x,\n      y_var = input$y,\n      col_var = input$z,\n      alpha_var = input$alpha,\n      size_var = input$size\n    ) +\n      labs(title = new_plot_title()) +\n      theme_minimal() +\n      theme(legend.position = \"bottom\")\n  })\n}\n\nshinyApp(ui = ui, server = server)"
  },
  {
    "objectID": "index.html#footnotes",
    "href": "index.html#footnotes",
    "title": "Shiny frameworks",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nrhino apps aren’t R packages–they’re dependencies are managed with a dependencies.R file and box modules.↩︎\nThis was a popular course among colleagues and covers (in my opinion) what a developer should know before considering a framework.↩︎"
  }
]